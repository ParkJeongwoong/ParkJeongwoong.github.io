{"pageProps":{"markdown":"# [GitHub Blog 개발기] Markdown 적용 및 Require 함수\r\n\r\n자주 업데이트 되는 Articles 항목은 Markdown으로 작성하기로 결정했다.\r\n\r\n\r\n\r\nLocal에 있는 Markdown 파일을 화면에 출력하는 방법은 다음과 같다.\r\n\r\n\r\n\r\n## 1. Markdown 파일을 <u>가져오기</u>\r\n\r\n> [요약]\r\n>\r\n> - JavaScript의 Require 함수를 이용해서 Local에 있는 Markdown 파일의 내용을 저장\r\n\r\n\r\n\r\n**Local에 있는 Markdown 파일을 가져오기 위해서 JavaScript의 Require 함수를 사용했다.**\r\n\r\n\r\n\r\n### JavaScript `Require`\r\n\r\n**Require()** : <u>모듈을 가져오는 함수</u> (정확히는 Modules의 exports를 가져오는 함수)\r\n\r\n=> 이 Require()를 이용해서 `Markdown 파일의 Text 정보`를 가져올 수 있다.\r\n\r\n\r\n\r\n#### 순서 1\r\n\r\n`require()`를 통해 content data에 담겨있는 path 정보를 이용해서 파일의 정보를 가져온다.\r\n\r\n```javascript\r\nconst readmePath = require(`store/article_data/${path.split(\"/\")[2]}/${\r\n      path.split(\"/\")[3]\r\n    }`);\r\n```\r\n\r\n\r\n\r\n#### 순서 2\r\n\r\n`fetch() - then() - text()` 과정을 통해 text 정보를 읽는다.\r\n\r\n```javascript\r\nfetch(readmePath.default)\r\n    .then(r => r.text())\r\n    .then(text => {\r\n      setMarkdown(text);\r\n    });\r\n```\r\n\r\n\r\n\r\n#### Require란?\r\n\r\n만약 Javascript 파일을 읽는다면 exports 정보들을, **.default** 를 이용하면 default 값을, **.변수** 를 이용하면 해당 파일에서 exports 된 변수 값을 읽을 수 있다.\r\n\r\n\r\n\r\nImport와 상당히 유사하다.\r\n\r\n그렇다면 차이점은 무엇일까?\r\n\r\n- require()\r\n  - node.js문\r\n  - 어디서나 호출 가능\r\n  - 파일 전체를 사용\r\n\r\n\r\n\r\n- import()\r\n  - ES6문\r\n  - 시작 부분에서만 호출 가능\r\n  - 필요한 부분만 선택 가능 => <u>성능이 우수하고 메모리를 절약</u>\r\n\r\n\r\n\r\n=> 그럼 import가 성능이 더 좋은데 왜 require를 썼는가?\r\n\r\n**import는 최상단에서만 호출 가능하여 조건문에 따라 호출이 불가능 하기 때문**\r\n\r\n\r\n\r\n\r\n\r\n## 2. Markdown 형식으로 <u>출력하기</u>\r\n\r\n> [요약]\r\n>\r\n> - react-markdown 을 사용\r\n> - markdown -> html 으로 변환된 코드에 대한 styling\r\n> - JavaScript를 변화시켜 줌으로써 추가 styling\r\n\r\n\r\n\r\n### react-markdown\r\n\r\n#### 설치\r\n\r\n먼저 React에서Markdown 형식으로 출력을 시켜줄 `react-markdown`을 설치 (공식문서 : https://www.npmjs.com/package/react-markdown)\r\n\r\n```bash\r\nnpm install react-markdown\r\n```\r\n\r\n\r\n\r\n#### 사용\r\n\r\n(위에서 setMarkdown(text)으로 저장한 markdown 변수를 markdown으로 출력하는 방법)\r\n\r\n**`<ReactMarkdown> 태그를 Return 함으로써 출력`**\r\n\r\n```react\r\n<ReactMarkdown children={markdown} />\r\n```\r\n\r\n\r\n\r\n이렇게만 해도 어느정도 Markdown 형태가 잡힌다.\r\n\r\n\r\n\r\n**하지만! <u>이렇게 두면 엉망진창의 예쁘지 않은 글이 된다</u>**\r\n\r\n\r\n\r\n그럼 입맛대로 꾸미는 법을 알아보자!\r\n\r\n\r\n\r\n### remark-gfm\r\n\r\n#### 설치\r\n\r\n공식문서에 소개된 것처럼 `remark-gfm`을 설치하면 link, table, checklist 등의 형식을 표현할 수 있다.\r\n\r\n```bash\r\nnpm install remark-gfm\r\n```\r\n\r\n\r\n\r\n#### 사용\r\n\r\nReactMarkdown 태그 안에 Plugin 형태로 추가하면 끝!\r\n\r\n```react\r\n<ReactMarkdown remarkPlugins={[remarkGfm]} children={markdown} />\r\n\r\n\r\n\r\n### 커스터마이즈 (react-syntax-highlighter)\r\n\r\n강조 표시, 인용 표시, 코드 인용을 위해서는 추가적인 작업이 필요하다.\r\n\r\n#### 설치\r\n\r\n그 중 코드 인용은 `react-syntax-highlighter`를 통해 표시가 가능하다.\r\n\r\n​```bash\r\nnpm install react-syntax-highlighter\r\n```\r\n\r\n\r\n\r\n#### 사용\r\n\r\n1. 먼저 components 속성을 ReactMardown 태그 안에 추가한다.\r\n2. 수정하고 싶은 태그를 적고 수정된 결과물을 return에 넣는다.\r\n\r\n```react\r\n<ReactMarkdown remarkPlugins={[remarkGfm]} children={markdown}\r\n    components={\r\n        %%%수정할 태그%%%({ node, inline, className, children, ...props }) { return %%%수정된 태그%%% }\r\n    }\r\n    />\r\n```\r\n\r\n>  **! github 페이지에선 중괄호( `{}` )를 중첩해서 사용하면 에러가 나기 때문에 중괄호를 하나만 사용했다.**\r\n>\r\n> **실제로는 component={ } 에서 중괄호를 두 번 작성해야 한다.**\r\n>\r\n> ( 소스코드 참고 : https://github.com/ParkJeongwoong/ParkJeongwoong.github.io/blob/master/src/components/Markdown/MarkdownRenderer.js )\r\n\r\n\r\n\r\n위 components 속성은 다음과 같이 작동한다.\r\n\r\n1. ReactMarkdown이 html화 시킨 코드를 하나씩 읽는다.\r\n2. components 안에 속하는 태그를 찾는다.\r\n3. **조건문**을 통해 커스텀을 하는 조건을 선택한다.\r\n4. 조건을 만족했을 때 **수정된 태그** 를 반환한다.\r\n\r\n\r\n\r\n#### 예시\r\n\r\n- `인용 표시`\r\n\r\n인용문은 <blockquote> 형태로 출력되기 때문에 인용문을 바꾸고 싶다면 다음과 같이 적으면 된다.\r\n\r\n```react\r\ncomponents={\r\n            // 인용문\r\n            blockquote({ node, children, ...props }) {\r\n                return (\r\n                  <div\r\n                    style={{\r\n                      background: \"#f0f0f0\",\r\n                      padding: \"1px 15px\",\r\n                      borderRadius: \"10px\",\r\n                    }}\r\n                    {...props}\r\n                  >\r\n                    {children}\r\n                  </div>\r\n                );\r\n              }\r\n           }\r\n```\r\n\r\n>  **! github 페이지에선 중괄호( `{}` )를 중첩해서 사용하면 에러가 나기 때문에 중괄호를 하나만 사용했다.**\r\n>\r\n> **실제로는 component={ } 에서 중괄호를 두 번 작성해야 한다.**\r\n>\r\n> ( 소스코드 참고 : https://github.com/ParkJeongwoong/ParkJeongwoong.github.io/blob/master/src/components/Markdown/MarkdownRenderer.js )\r\n\r\n\r\n\r\n- `강조 표시` 과 `코드 인용`\r\n\r\n강조 표시와 코드 인용은 모두 <code> 형태로 출력된다.\r\n\r\n이 때 차이점은 **강조문**은 `inline 속성`을 가지고 있으며 (줄바꿈이 안 일어난다)\r\n\r\n**코드 인용**은 `block 속성`을 가지고 있다는 것이다. (줄바꿈이 일어난다)\r\n\r\n\r\n\r\n그리고 코드 인용에서 `match 속성`은 사용 언어를 뜻한다. (언어가 설정되지 않은 코드 인용 구문은 match 값이 false가 된다)\r\n\r\n\r\n\r\n따라서 강조 표시와 코드 인용은 다음과 같이 적으면 된다.\r\n\r\n```react\r\ncomponents={\r\n            code({ node, inline, className, children, ...props }) {\r\n                const match = /language-(\\w+)/.exec(className || \"\");\r\n                return inline ? (\r\n                  // 강조\r\n                  <code\r\n                    style={{\r\n                      background: \"var(--highlight-color)\",\r\n                      padding: \"2px\",\r\n                    }}\r\n                    {...props}\r\n                  >\r\n                    {children}\r\n                  </code>\r\n                ) : match ? (\r\n                  // 코드\r\n                  // 언어가 선택됨\r\n                  <SyntaxHighlighter\r\n                    children={String(children).replace(/\\n$/, \"\")}\r\n                    style={nord}\r\n                    language={match[1]}\r\n                    PreTag=\"div\"\r\n                    {...props}\r\n                  />\r\n                ) : (\r\n                  // 언어가 선택되지 않음\r\n                  <SyntaxHighlighter\r\n                    children={String(children).replace(/\\n$/, \"\")}\r\n                    style={nord}\r\n                    language=\"textile\"\r\n                    PreTag=\"div\"\r\n                    {...props}\r\n                  />\r\n                );\r\n              }\r\n           }\r\n```\r\n\r\n>  **! github 페이지에선 중괄호( `{}` )를 중첩해서 사용하면 에러가 나기 때문에 중괄호를 하나만 사용했다.**\r\n>\r\n> **실제로는 component={ } 에서 중괄호를 두 번 작성해야 한다.**\r\n>\r\n> ( 소스코드 참고 : https://github.com/ParkJeongwoong/ParkJeongwoong.github.io/blob/master/src/components/Markdown/MarkdownRenderer.js )\r\n\r\n\r\n\r\n### react-markdown 사용 시 `공백 줄` 문제\r\n\r\n- 현상 : react-markdown에서는 공백인 줄이 표현 X\r\n\r\n\r\n\r\n- 해결\r\n\r\n```javascript\r\nmarkdown.replace(/\\n\\s\\n\\s/gi, \"\\n\\n&nbsp;\\n\\n\")\r\n```\r\n\r\n마크다운 파일의 텍스트를 위와 같이 바꿔 줌으로 써 해결\r\n\r\n**이 때! 정확한 원인은 모르겠지만 Local에선 `\\n\\n &nbsp;`로도 줄바꿈이 가능하지만 Github에 업로드 하면 줄바꿈이 되지 않는 문제 발생**\r\n\r\n**인코딩 상의 문제인지 \\n을 두 번 해줘야 줄바꿈이 됨 => `\\n\\n&nbsp;\\n\\n`로 바꿔야 함**\r\n\r\n\r\n\r\n마크다운 파일에서 `기본 줄바꿈`은 `엔터 두 번`\r\n\r\n`공백이 있는 줄`은 `엔터 네 번`으로 변환\r\n\r\n\r\n\r\n엔터 뒤에는 공백이 하나 있기 때문에 `\\n\\s\\n\\s`를 정규표현식으로 찾아서 변환해야 한다.\r\n\r\n\r\n\r\n### react-markdown 사용 시 <u>`밑줄`</u> 문제\r\n\r\n- 현상 : react-markdown에서는 밑줄이 표현 X\r\n\r\n\r\n\r\n- 해결\r\n\r\n`먼저 em 태그의 css를 밑줄로 변경`\r\n\r\n```javascript\r\nmarkdown\r\n    .replace(/\\n\\s\\n\\s/gi, \"\\n\\n&nbsp;\\n\\n\")\r\n    .replace(/\\*\\*/gi, \"@$_%!\\^\")\r\n    .replace(/\\**\\*/gi, \"/\")\r\n    .replace(/@\\$_%!\\^/gi, \"**\")\r\n    .replace(/<\\/?u>/gi, \"*\")\r\n```\r\n\r\n1. 우선 <u>강조 표시</u>를 `사용하지 않는 특수문자 묶음`으로 변환 (위 세 번째 줄(@$_%!\\^)에서 ^앞의 \\는 자동 변환을 막기 위해 추가 ; 이게 없으면 파싱 중 자동으로 **로 변환됨)\r\n2. <u>이탤릭체</u>를 `슬래쉬`로 변환\r\n3. `강조 표시를 다시 복구`\r\n4. <u>언더 바 태그</u>를 `이탤릭체`로 변환 => <u>**변환된 이탤릭체는 밑줄로 표시**</u>\r\n\r\n\r\n\r\n","documentTitle":"[GitHub Blog 개발기] Markdown 적용 및 Require 함수"},"__N_SSG":true}