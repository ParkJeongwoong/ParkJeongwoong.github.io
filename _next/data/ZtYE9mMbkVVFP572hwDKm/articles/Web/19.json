{"pageProps":{"markdown":"# 비밀번호\r\n\r\n비밀번호는 어떻게 보호될까?\r\n\r\n당연히 내 비밀번호를 평문으로 저장하지는 않을 거고 해시를 사용해서 암호화를 할 것 같은데, 그걸로 충분할까??\r\n\r\n\r\n\r\n## STEP1. 단방향 해시\r\n\r\n일단 미국 국가안보국에서 만든 SHA-256을 사용하면 해독이 불가능한 단방향 해시값을 만들어낼 수 있다.\r\n\r\n### 레인보우 테이블\r\n\r\n당연하게도, 단방향 해시를 사용하면 인풋값이 같으면 아웃풋값도 같다.\r\n\r\n그런데 이 뜻은 해시를 직접 복호화할 순 없어도 내가 아는 인풋-아웃풋 관계라면 인풋값을 추정할 수 있다는 뜻이다.\r\n\r\n즉 \"hunter2\"에 대응하는 해시값이 \"f52fbd32b2b3b86ff88ef6c490628285f482af15ddcb29541f94bcf526a3f6c7\"라는 걸 알고 있다면\r\n\r\n반대로 \"f52fbd32b2b3b86ff88ef6c490628285f482af15ddcb29541f94bcf526a3f6c7\"를 보고 이게 \"hunter2\"라는 걸 유추하는 게 가능하다.\r\n\r\n\r\n\r\n이를 이용해서 자주 사용하는 비밀번호에 대한 해시값 결과물들을 미리 계산해서 저장해두는 것을 **레인보우 테이블**이라고 부른다.\r\n\r\n(실제로는 단순히 결과물만 모아놓지 않고 조금 더 복잡한 방법을 이용해 효율적으로 계산한다)\r\n\r\n이를 이용해서 인풋값을 확인할 수 있는 가능성이 있으므로 단방향 해시만을 이용하는 것은 안전하지 않다.\r\n\r\n### 브루트포스\r\n\r\n비밀번호를 뚫기 위해 무식하게 비밀번호를 이것저것 시도해보며 공격을 할 수도 있다. 문제는 해시 함수가 굉장히 빠르게 동작한다는 것이다.\r\n\r\n단방향 해시는 공격자가 1초에 수십 억개의 경우의 수를 시도할 수 있기 때문에 더욱 위험하다.\r\n\r\n\r\n\r\n## STEP2. Salting\r\n\r\n요리에 소금을 뿌려 간을 맞추듯 비밀번호에 임의의 값(소금)을 추가해 암호화를 할 수도 있다.\r\n\r\nHello라는 단어는 레인보우 테이블에 있을 가능성이 크지만, Helloasfj$!@#asdf04##asdf2q는 없을 가능성이 매우 높다.\r\n\r\n\r\n\r\n## STEP3. Key Stretching\r\n\r\n해시 함수를 한 번만 돌리는 것이 아니라, 여러 번 반복해서 돌리는 방법이다.\r\n\r\n이렇게 함수를 여러 번 돌려 암호화 시간을 0.2초까지 늘인다면 브루트포스 공격을 효과적으로 막을 수 있다. (초당 수십 억 개의 공격 -> 초당 5개의 공격)\r\n\r\n\r\n\r\n## 결론\r\n\r\nSalting과 Key Stretching을 모두 사용하면 비밀번호를 안전하게 보호할 수 있다. (비밀번호가 들어있는 테이블이 유출되더라도 해커는 원본을 알 수 없다)\r\n\r\n물론 이를 일일이 구현하는 것은 낭비이다.\r\n\r\n잘 만들어진 해시 함수들이 이미 존재하기 때문에 이것들을 사용하면 된다.\r\n\r\n- **PBKDF2**(Password-Based Key Derivation Function)\r\n\r\n```python\r\npbkdf2_hmac(사용할 해시함수, 비밀번호, salt값, 반복 회수, 원하는 결과물 길이)\r\n```\r\n\r\n- **bcrypt**\r\n\r\n```java\r\nbcrypt.hashpw(비밀번호, bcrypt.gensalt())\r\n```\r\n\r\n- **scfript**\r\n\r\n```python\r\nhashlib.scrypt(비밀번호, salt값, CPU 비용, 메모리 비용, 병렬화, 원하는 결과물 길이)\r\n```\r\n\r\n\r\n\r\n\r\n\r\n## 출처\r\n\r\nhttps://snippets-save-us.tistory.com/44\r\n\r\nhttps://d2.naver.com/helloworld/318732\r\n\r\nhttps://whyforeverything.tistory.com/3","documentTitle":"비밀번호"},"__N_SSG":true}