{"pageProps":{"markdown_gitHub":"# [GitHub Blog 개발기] Oracle Cloud Infra 무료 인스턴스 정지\r\n\r\n\r\n\r\nGmail을 확인해보니 다음과 같은 메일이 와 있었다.\r\n\r\n![20230308healthcheck1](../../../../public/assets/20230308healthcheck1.jpg)\r\n\r\n이전에 만들었던 Health Check 알림이었는데, 이게 사용될 일이 있을까 싶었는데 직접 메일을 받으니 당황스러우면서 보람찬 복잡한 기분이 들었다.\r\n\r\n![20230308healthcheck2](../../../../public/assets/20230308healthcheck2.jpg)\r\n\r\nGrafana에 들어가서 Loki를 확인해보니 역시나 에러 로그가 아침부터 계속 찍히고 있었다.\r\n\r\n\r\n\r\n오라클 클라우드 인프라(OCI)에 접속해보니 인스턴스가 멈춰있었고 알림이 와 있었다.\r\n\r\n![20230308oci1](../../../../public/assets/20230308oci1.jpg)\r\n\r\n사용하지 않는 유휴 상태의 무료 인스턴스라 정지시킨다는 내용이었다.\r\n\r\n생각해보니 얼마 전에 같은 내용의 메일을 읽은 적이 있었다. 그게 무슨 뜻인가 싶었는데 아무래도 오라클에서 평생 무료 인스턴스 운영에 부담이 생격 자원 관리를 시작한 것 같다.\r\n\r\n![20230308oci2](../../../../public/assets/20230308oci2.jpg)\r\n\r\n상세 문서를 보니 일주일 동안 위의 3개 조건을 만족하면 유휴 상태로 간주하고 인스턴스를 정지시킨다고 한다.\r\n\r\n- 일주일 동안 CPU 사용률 10% 미만인 시간이 95% 이상\r\n- 네트워크 사용율이 10% 미만\r\n- (A1 Shape의 경우) 메모리 사용율이 10% 미만\r\n\r\n블로그 서버의 특성상 사용률이 높지 않은데 OCI 서버는 검색이라던지 연관 문서 분류 등의 기능이 없기 때문에 유휴 상태로 간주되는 것 같다.\r\n\r\n앞으로 매주 이런 일이 발생할텐데 어떻게 운영할지 고민을 해 봐야겠다.\r\n\r\n\r\n\r\n## 요약\r\n\r\n- OCI의 사용률이 낮은 무료 인스턴스는 이제부터 정지될 수 있다\r\n  - 일주일 동안 CPU 사용률 10% 미만인 시간이 95% 이상\r\n  - 네트워크 사용율이 10% 미만\r\n  - (A1 Shape의 경우) 메모리 사용율이 10% 미만\r\n- 이 경우 그냥 인스턴스를 재시작하면 된다 (무료 인스턴스가 영구 정지되는 것은 아니다. 전원만 내려가는 것 뿐)\r\n- Health Check 기능이 생각치 않게 도움이 되었다. 상황을 보니 앞으로도 많은 도움이 될 것 같다. (대신 메인 서버의 Health Check를 하는 주체가 불안정적으로 변한 건 고민해야 할 부분이다)","documentTitle":"[GitHub Blog 개발기] Oracle Cloud Infra 무료 인스턴스 정지","articleCategory":"Develop","articleId":"16"},"__N_SSG":true}