{"pageProps":{"markdown":"# [Spring Boot 프로젝트] HTTPS 실패\r\n\r\n## 과정\r\n\r\n### Mixed Content\r\n\r\n```\r\n[Github Pages] - [EC2]\r\n```\r\n\r\n**스프링 부트와 AWS로 혼자 구현하는 웹 서비스**를 보고 만든 EC2 WAS를 Github Page로 만든 프론트단과 연결하려고 했다.\r\n\r\n그리고 `Mixed Content` 에러를 마주했다.\r\n\r\n깃헙 페이지는 보안이 적용된 HTTPS 프로토콜을 사용하는데, EC2의 WAS는 HTTP 프로토콜을 사용해서 호환이 되지 않는 문제였다.\r\n\r\n이를 해결하려면 EC2의 WAS를 HTTPS로 변경해야 했다.\r\n\r\n\r\n\r\n### SSL 인증서 오류\r\n\r\n```\r\n[Github Pages] - [ALB] - [EC2]\r\n```\r\n\r\n[freenom](https://www.freenom.com/)을 통해 무료 도메인을 생성하고 이를 AWS에서 제공하는 ACM(SSL 인증서)과 ALB(로드밸런서)를 이용해 HTTPS 프로토콜 세팅을 했더니 다음과 같은 `ERR_CERT_COMMON_NAME_INVALID` 에러가 생겼다.\r\n\r\n![image-20220203213355629](../../../../public/assets/image-20220203213355629.png)\r\n\r\n요청을 보낸 서버 이름과 SSL 인증서의 서버 이름이 달라서 생기는 문제인데, 이를 해결하기 위해 여러 방법을 시도했는데 아직 해결하지 못했다.\r\n\r\n**EC2 서버에 직접 SSL을 설치**하면 되지만 해당 도메인은 임시로 사용할 무료 도메인이라 AWS에서 제공하는 기능을 사용해서 해결하고 싶어 다음과 같은 시도를 했었다.\r\n\r\n\r\n\r\n### Nginx\r\n\r\n온갖 방법을 시도해도 되지 않아 Nginx를 이용해서 443포트로 들어오는 HTTPS 연결을 처리하려고 했다.\r\n\r\n처음에 yum install을 이용해 Nginx를 설치하고 openssl을 통해 SSL 인증서를 EC2에 설치한 후 Nginx를 실행하니 HTTP 접속은 가능하나 HTTPS 접속이 되지 않았다.\r\n\r\nhttp_ssl_module을 추가하고자 삭제한 후 이후부터는 Yum을 사용하지 않고 컴파일 설치를 시도했는데 각종 (2 no such file or directory) 에러, (21: Is a directory) 에러 등이 떠 10번 가까이 삭제와 재설치를 반복했다.\r\n\r\n덕분에 Nginx 설치, 환경설정은 어느정도 익숙해졌지만 결국 아직까지 해결하지 못했다.\r\n\r\n![image-20220206162718748](../../../../public/assets/image-20220206162718748.png)\r\n\r\n\r\n\r\nyum과 certbot을 이용해 시도를 해봐야겠다.\r\n","documentTitle":"[Spring Boot 프로젝트] HTTPS 실패"},"__N_SSG":true}