<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>[블록체인] 작업증명 | 웅&#x27;s 블로그</title><meta name="description" content="# [블록체인] 작업증명

블록체인은 &quot;데이터 분산 처리 기술&quot;이다. 즉 한 사람이 만들고 쓰는 것이 아니라 여러 사람이 네트워크를 형성하고 함께 데이터를 만들고 쓰며 운영된다.

이런 상황에서 결국 가장 중요한 문제는 &quot;어떤 데이터를 저장할 것인가&quot;이다.

블록체인 네트워크 상에서 일어나는 기록되어야 할 활동을 여러 블록에 넣고 이를 연결해야 하는데 모두가 같은 블록체인을 가지고 있어야 하기 때문에 블록을 추가할 때 합의가 필요하다.

이를 위한 알고리즘이 합의 알고리즘이고 대표적으로 **작업증명**(Proof of Work)과 **지분증명**(Proof of Stake)이 있다.

이번 글에선 가장 먼저 적용된 합의 알고리즘인 작업증명에 대해 이야기하고자 한다.



## 작업증명

가장 유명한 블록체인 네트워크인 비트코인 네트워크에서 사용하는 방식이다.

채굴이라고도 불리는 작업증명은 이름만 봐서는 그 의미기 쉽게 와 닿지 않았다. (개인적으로는 채굴이라는 표현 때문에 더 헷갈린다고 생각한다.)



흔히들 문제를 풀면 코인을 준다는 식으로 표현되는데 &quot;**어떤 문제를, 왜 풀어야 할까?**&quot;

이전 글에서 블록체인의 데이터 블록은 [데이터 - 이전 해시값 - 해시값] 으로 이루어 진다고 했다.

블록체인은 위변조가 어렵다고 하는데 블록체인의 데이터를 수정하면 다음과 같은 일이 일어난다.

```
(1) 블록1의 데이터를 바꾼다.

(2) 블록1의 데이터가 바뀌었기 때문에 데이터와 이전 해시값을 기반으로 만들어지는 블록1의 해시값이 변경된다.

(3) 블록1의 해시값이 바뀌었기 때문에 블록2의 이전 해시값이 바뀐다.

(4) 블록2의 이전 해시값이 바뀌었기 때문에 데이터와 이전 해시값을 기반으로 만들어지는 블록2의 해시값이 변경된다.

(5) 이후 반복
```

결국 모든 데이터 블록을 다 바꿔야 한다.



그런데! 문제는 성능이 좋은 요즘 컴퓨터는 해시값을 구하는 게 일도 아니다.

여러 컴퓨터에서 동시에 수많은 블록들을 생성할 수 있고 마음만 먹으면 전체 체인의 구조도 변경할 수 있다.

블록체인 네트워크에는 단 하나의 블록체인만 존재해야 하는데 이 경우 어떤 블록체인을 골라야 할 지 판단하기 어렵고 또 진짜 블록체인을 구분하기도 어렵다.

이런 문제를 비트코인은 작업증명을 이용해 강제적으로 비효율을 발생시켜 블록 생성 속도를 지연시키는 방식으로 해결했다.



즉, 데이터 블록의 해시값이 특정한 규칙을 맞춰야만 검증된 데이터 블록으로 인정하는 것이다.

작업증명에서는 해시값을 만드는 input 값에 **nounce**라는 정수를 추가해 3개의 입력(데이터, 이전 해시값, nounce)으로 해시값을 구한다.

해시값은 예측이 되지 않기 때문에 이렇게 생성된 해시값이 규칙을 맞추지 못할 확률이 크고 이 규칙에 맞는 해시값이 나올 때 까지 계속 nounce 값을 바꾸면서 해시값을 계산하는 게 작업증명이고 적합한 해시값을 찾아 블록을 생성하면 보상으로 코인을 받는다.



비트코인 네트워크에서는 적합한 해시값을 찾는데 평균 10분의 시간이 걸리도록 해시값 규칙의 난이도를 조정하고 있는데, 이렇게 시간과 비용을 강제하면 다음과 같은 이점이 있다.



1) 블록 생성에 엄청난 자원이 필요하기 때문에 쉽게 블록을 위변조 하지 못한다. (위변조를 하면 수정한 과거의 블록~새로운 블록을 모두 새로 만들어야 한다.)
2) 많은 비용을 들여 가짜 블록체인을 생성하더라도 강제적으로 하나에 10분을 소모하도록 만들었기 때문에 블록체인의 길이가 정상 블록체인보다 짧다. 이 때문에 블록체인 네트워크에서는 더 짧은 블록체인은 신뢰성이 떨어진다고 판단하고 네트워크에서 삭제한다.



### 작업증명을 통한 블록 추가 과정

*노드 : 흔히 말하는 채굴자다. 블록체인 네트워크를 유지하고(블록체인 저장) 동작시키는(블록 추가) 컴퓨터들을 말한다.

![image-20211203004959189](../../../../public/assets/image-20211203004959189.png)

[작업증명을 통해 새로운 블록이 추가되는 과정]

1. 거래가 발생한다. 거래 정보가 적힌 메시지에 개인키로 디지털 서명한다.

2. 서명한 Transaction을 블록체인 네트워크로 보낸다.

3. Unconfirmed Transaction이 모이는 공간에 Transaction이 쌓인다.

4. 각 노드가 Unconfirmed Transaction을 모아(3000개 정도) 데이터 덩어리로 만들고 작업증명을 시작한다.

   (이 때 자기 자신에게 코인을 보상으로 지급하는 Transaction이 블록에 함께 들어간다)

5. 가장 빨리 적합한 해시값을 찾은 노드는 자신의 블록을 블록체인에 추가하고 네트워크의 노드에게 전달한다.

6. 다른 노드들은 새로운 블록을 검증하고 적합한 블록이라면 진행 중이던 작업증명을 멈추고 자신의 블록체인에 추가한다.

7. 이제 모든 노드는 새로운 블록이 추가된 동일한 블록체인을 갖는다.



8. 지구 반대편의 노드와 같이 물리적 거리가 멀어 새로 만든 블록에 대한 소식을 늦게 전달하거나, 가까운 노드가 매우 비슷한 순간에 문제를 해결해 두 개 이상의 블록체인이 네트워크 상에 존재할 수 있다.
9. 이렇게 블록체인이 충돌한 경우 가장 긴 체인이 신뢰도가 높다고 판단하기 때문에 짧은 체인을 삭제한다.



10. 즉 발생한 거래는 새로운 블록이 추가되면서 증명된다.

11. 그런데 위와 같은 충돌이나 기타 사유로 추가된 블록이 삭제될 수가 있다.

12. 그래서 비트코인은 거래 내역이 담긴 블록이 생성되고 저장된 블록을 포함해 6개의 블록이 생성되어야(60분 소요) 거래가 확정된다.

    (6개의 블록이 추가되면 분기가 생길 확률이 0에 가까워 진다.)
"/><meta property="og:type" content="website"/><meta property="og:title" content="[블록체인] 작업증명"/><meta property="og:description" content="# [블록체인] 작업증명

블록체인은 &quot;데이터 분산 처리 기술&quot;이다. 즉 한 사람이 만들고 쓰는 것이 아니라 여러 사람이 네트워크를 형성하고 함께 데이터를 만들고 쓰며 운영된다.

이런 상황에서 결국 가장 중요한 문제는 &quot;어떤 데이터를 저장할 것인가&quot;이다.

블록체인 네트워크 상에서 일어나는 기록되어야 할 활동을 여러 블록에 넣고 이를 연결해야 하는데 모두가 같은 블록체인을 가지고 있어야 하기 때문에 블록을 추가할 때 합의가 필요하다.

이를 위한 알고리즘이 합의 알고리즘이고 대표적으로 **작업증명**(Proof of Work)과 **지분증명**(Proof of Stake)이 있다.

이번 글에선 가장 먼저 적용된 합의 알고리즘인 작업증명에 대해 이야기하고자 한다.



## 작업증명

가장 유명한 블록체인 네트워크인 비트코인 네트워크에서 사용하는 방식이다.

채굴이라고도 불리는 작업증명은 이름만 봐서는 그 의미기 쉽게 와 닿지 않았다. (개인적으로는 채굴이라는 표현 때문에 더 헷갈린다고 생각한다.)



흔히들 문제를 풀면 코인을 준다는 식으로 표현되는데 &quot;**어떤 문제를, 왜 풀어야 할까?**&quot;

이전 글에서 블록체인의 데이터 블록은 [데이터 - 이전 해시값 - 해시값] 으로 이루어 진다고 했다.

블록체인은 위변조가 어렵다고 하는데 블록체인의 데이터를 수정하면 다음과 같은 일이 일어난다.

```
(1) 블록1의 데이터를 바꾼다.

(2) 블록1의 데이터가 바뀌었기 때문에 데이터와 이전 해시값을 기반으로 만들어지는 블록1의 해시값이 변경된다.

(3) 블록1의 해시값이 바뀌었기 때문에 블록2의 이전 해시값이 바뀐다.

(4) 블록2의 이전 해시값이 바뀌었기 때문에 데이터와 이전 해시값을 기반으로 만들어지는 블록2의 해시값이 변경된다.

(5) 이후 반복
```

결국 모든 데이터 블록을 다 바꿔야 한다.



그런데! 문제는 성능이 좋은 요즘 컴퓨터는 해시값을 구하는 게 일도 아니다.

여러 컴퓨터에서 동시에 수많은 블록들을 생성할 수 있고 마음만 먹으면 전체 체인의 구조도 변경할 수 있다.

블록체인 네트워크에는 단 하나의 블록체인만 존재해야 하는데 이 경우 어떤 블록체인을 골라야 할 지 판단하기 어렵고 또 진짜 블록체인을 구분하기도 어렵다.

이런 문제를 비트코인은 작업증명을 이용해 강제적으로 비효율을 발생시켜 블록 생성 속도를 지연시키는 방식으로 해결했다.



즉, 데이터 블록의 해시값이 특정한 규칙을 맞춰야만 검증된 데이터 블록으로 인정하는 것이다.

작업증명에서는 해시값을 만드는 input 값에 **nounce**라는 정수를 추가해 3개의 입력(데이터, 이전 해시값, nounce)으로 해시값을 구한다.

해시값은 예측이 되지 않기 때문에 이렇게 생성된 해시값이 규칙을 맞추지 못할 확률이 크고 이 규칙에 맞는 해시값이 나올 때 까지 계속 nounce 값을 바꾸면서 해시값을 계산하는 게 작업증명이고 적합한 해시값을 찾아 블록을 생성하면 보상으로 코인을 받는다.



비트코인 네트워크에서는 적합한 해시값을 찾는데 평균 10분의 시간이 걸리도록 해시값 규칙의 난이도를 조정하고 있는데, 이렇게 시간과 비용을 강제하면 다음과 같은 이점이 있다.



1) 블록 생성에 엄청난 자원이 필요하기 때문에 쉽게 블록을 위변조 하지 못한다. (위변조를 하면 수정한 과거의 블록~새로운 블록을 모두 새로 만들어야 한다.)
2) 많은 비용을 들여 가짜 블록체인을 생성하더라도 강제적으로 하나에 10분을 소모하도록 만들었기 때문에 블록체인의 길이가 정상 블록체인보다 짧다. 이 때문에 블록체인 네트워크에서는 더 짧은 블록체인은 신뢰성이 떨어진다고 판단하고 네트워크에서 삭제한다.



### 작업증명을 통한 블록 추가 과정

*노드 : 흔히 말하는 채굴자다. 블록체인 네트워크를 유지하고(블록체인 저장) 동작시키는(블록 추가) 컴퓨터들을 말한다.

![image-20211203004959189](../../../../public/assets/image-20211203004959189.png)

[작업증명을 통해 새로운 블록이 추가되는 과정]

1. 거래가 발생한다. 거래 정보가 적힌 메시지에 개인키로 디지털 서명한다.

2. 서명한 Transaction을 블록체인 네트워크로 보낸다.

3. Unconfirmed Transaction이 모이는 공간에 Transaction이 쌓인다.

4. 각 노드가 Unconfirmed Transaction을 모아(3000개 정도) 데이터 덩어리로 만들고 작업증명을 시작한다.

   (이 때 자기 자신에게 코인을 보상으로 지급하는 Transaction이 블록에 함께 들어간다)

5. 가장 빨리 적합한 해시값을 찾은 노드는 자신의 블록을 블록체인에 추가하고 네트워크의 노드에게 전달한다.

6. 다른 노드들은 새로운 블록을 검증하고 적합한 블록이라면 진행 중이던 작업증명을 멈추고 자신의 블록체인에 추가한다.

7. 이제 모든 노드는 새로운 블록이 추가된 동일한 블록체인을 갖는다.



8. 지구 반대편의 노드와 같이 물리적 거리가 멀어 새로 만든 블록에 대한 소식을 늦게 전달하거나, 가까운 노드가 매우 비슷한 순간에 문제를 해결해 두 개 이상의 블록체인이 네트워크 상에 존재할 수 있다.
9. 이렇게 블록체인이 충돌한 경우 가장 긴 체인이 신뢰도가 높다고 판단하기 때문에 짧은 체인을 삭제한다.



10. 즉 발생한 거래는 새로운 블록이 추가되면서 증명된다.

11. 그런데 위와 같은 충돌이나 기타 사유로 추가된 블록이 삭제될 수가 있다.

12. 그래서 비트코인은 거래 내역이 담긴 블록이 생성되고 저장된 블록을 포함해 6개의 블록이 생성되어야(60분 소요) 거래가 확정된다.

    (6개의 블록이 추가되면 분기가 생길 확률이 0에 가까워 진다.)
"/><meta property="og:site_name" content="웅&#x27;s 블로그"/><link rel="icon" href="/myLogo_transp.png"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/a1ca12cc1e4f36e64c14.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a1ca12cc1e4f36e64c14.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8d2cfc0c48a9fc169b11.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d2cfc0c48a9fc169b11.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-d1e3ce7bd5cd46c1581b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-27d5fdc1d85004dc6cc5.js" defer=""></script><script src="/_next/static/chunks/485-1121db7a55400d486874.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5BarticleCategory%5D/%5BarticleId%5D-9ceb51083ce229176f1f.js" defer=""></script><script src="/_next/static/WMqYWGkExDO2ZZQUMqQ3P/_buildManifest.js" defer=""></script><script src="/_next/static/WMqYWGkExDO2ZZQUMqQ3P/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="App"><div class="App__Content"><div class="Header_Header__1J9sN"><div class="Header_Header__styling__U361E"><img src="/myLogo_transp.png" alt="logo"/></div><a class="Header_Header__word__hqgKV" href="/">Home</a><a class="Header_Header__word__hqgKV" href="/profile">Profile</a><a class="Header_Header__word__hqgKV" href="/articles">Articles</a><a class="Header_Header__word__hqgKV" href="/archives">Archives</a><div class="Header_Header__styling_Reverse__2G1sc"></div></div><div><main><div class="globalStyles_loader__29zgS"><span>Loading...</span></div></main></div></div><div class="Footer_Footer__16BK3"><div class="Footer_Footer__github__3FRw-">Github : <a href="https://github.com/ParkJeongwoong">ParkJeongwoong</a></div><div class="Footer_Footer__email__gbWyz">Contact : <span>dvlprjw@gmail.com</span></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdown":"# [블록체인] 작업증명\r\n\r\n블록체인은 \"데이터 분산 처리 기술\"이다. 즉 한 사람이 만들고 쓰는 것이 아니라 여러 사람이 네트워크를 형성하고 함께 데이터를 만들고 쓰며 운영된다.\r\n\r\n이런 상황에서 결국 가장 중요한 문제는 \"어떤 데이터를 저장할 것인가\"이다.\r\n\r\n블록체인 네트워크 상에서 일어나는 기록되어야 할 활동을 여러 블록에 넣고 이를 연결해야 하는데 모두가 같은 블록체인을 가지고 있어야 하기 때문에 블록을 추가할 때 합의가 필요하다.\r\n\r\n이를 위한 알고리즘이 합의 알고리즘이고 대표적으로 **작업증명**(Proof of Work)과 **지분증명**(Proof of Stake)이 있다.\r\n\r\n이번 글에선 가장 먼저 적용된 합의 알고리즘인 작업증명에 대해 이야기하고자 한다.\r\n\r\n\r\n\r\n## 작업증명\r\n\r\n가장 유명한 블록체인 네트워크인 비트코인 네트워크에서 사용하는 방식이다.\r\n\r\n채굴이라고도 불리는 작업증명은 이름만 봐서는 그 의미기 쉽게 와 닿지 않았다. (개인적으로는 채굴이라는 표현 때문에 더 헷갈린다고 생각한다.)\r\n\r\n\r\n\r\n흔히들 문제를 풀면 코인을 준다는 식으로 표현되는데 \"**어떤 문제를, 왜 풀어야 할까?**\"\r\n\r\n이전 글에서 블록체인의 데이터 블록은 [데이터 - 이전 해시값 - 해시값] 으로 이루어 진다고 했다.\r\n\r\n블록체인은 위변조가 어렵다고 하는데 블록체인의 데이터를 수정하면 다음과 같은 일이 일어난다.\r\n\r\n```\r\n(1) 블록1의 데이터를 바꾼다.\r\n\r\n(2) 블록1의 데이터가 바뀌었기 때문에 데이터와 이전 해시값을 기반으로 만들어지는 블록1의 해시값이 변경된다.\r\n\r\n(3) 블록1의 해시값이 바뀌었기 때문에 블록2의 이전 해시값이 바뀐다.\r\n\r\n(4) 블록2의 이전 해시값이 바뀌었기 때문에 데이터와 이전 해시값을 기반으로 만들어지는 블록2의 해시값이 변경된다.\r\n\r\n(5) 이후 반복\r\n```\r\n\r\n결국 모든 데이터 블록을 다 바꿔야 한다.\r\n\r\n\r\n\r\n그런데! 문제는 성능이 좋은 요즘 컴퓨터는 해시값을 구하는 게 일도 아니다.\r\n\r\n여러 컴퓨터에서 동시에 수많은 블록들을 생성할 수 있고 마음만 먹으면 전체 체인의 구조도 변경할 수 있다.\r\n\r\n블록체인 네트워크에는 단 하나의 블록체인만 존재해야 하는데 이 경우 어떤 블록체인을 골라야 할 지 판단하기 어렵고 또 진짜 블록체인을 구분하기도 어렵다.\r\n\r\n이런 문제를 비트코인은 작업증명을 이용해 강제적으로 비효율을 발생시켜 블록 생성 속도를 지연시키는 방식으로 해결했다.\r\n\r\n\r\n\r\n즉, 데이터 블록의 해시값이 특정한 규칙을 맞춰야만 검증된 데이터 블록으로 인정하는 것이다.\r\n\r\n작업증명에서는 해시값을 만드는 input 값에 **nounce**라는 정수를 추가해 3개의 입력(데이터, 이전 해시값, nounce)으로 해시값을 구한다.\r\n\r\n해시값은 예측이 되지 않기 때문에 이렇게 생성된 해시값이 규칙을 맞추지 못할 확률이 크고 이 규칙에 맞는 해시값이 나올 때 까지 계속 nounce 값을 바꾸면서 해시값을 계산하는 게 작업증명이고 적합한 해시값을 찾아 블록을 생성하면 보상으로 코인을 받는다.\r\n\r\n\r\n\r\n비트코인 네트워크에서는 적합한 해시값을 찾는데 평균 10분의 시간이 걸리도록 해시값 규칙의 난이도를 조정하고 있는데, 이렇게 시간과 비용을 강제하면 다음과 같은 이점이 있다.\r\n\r\n\r\n\r\n1) 블록 생성에 엄청난 자원이 필요하기 때문에 쉽게 블록을 위변조 하지 못한다. (위변조를 하면 수정한 과거의 블록~새로운 블록을 모두 새로 만들어야 한다.)\r\n2) 많은 비용을 들여 가짜 블록체인을 생성하더라도 강제적으로 하나에 10분을 소모하도록 만들었기 때문에 블록체인의 길이가 정상 블록체인보다 짧다. 이 때문에 블록체인 네트워크에서는 더 짧은 블록체인은 신뢰성이 떨어진다고 판단하고 네트워크에서 삭제한다.\r\n\r\n\r\n\r\n### 작업증명을 통한 블록 추가 과정\r\n\r\n*노드 : 흔히 말하는 채굴자다. 블록체인 네트워크를 유지하고(블록체인 저장) 동작시키는(블록 추가) 컴퓨터들을 말한다.\r\n\r\n![image-20211203004959189](../../../../public/assets/image-20211203004959189.png)\r\n\r\n[작업증명을 통해 새로운 블록이 추가되는 과정]\r\n\r\n1. 거래가 발생한다. 거래 정보가 적힌 메시지에 개인키로 디지털 서명한다.\r\n\r\n2. 서명한 Transaction을 블록체인 네트워크로 보낸다.\r\n\r\n3. Unconfirmed Transaction이 모이는 공간에 Transaction이 쌓인다.\r\n\r\n4. 각 노드가 Unconfirmed Transaction을 모아(3000개 정도) 데이터 덩어리로 만들고 작업증명을 시작한다.\r\n\r\n   (이 때 자기 자신에게 코인을 보상으로 지급하는 Transaction이 블록에 함께 들어간다)\r\n\r\n5. 가장 빨리 적합한 해시값을 찾은 노드는 자신의 블록을 블록체인에 추가하고 네트워크의 노드에게 전달한다.\r\n\r\n6. 다른 노드들은 새로운 블록을 검증하고 적합한 블록이라면 진행 중이던 작업증명을 멈추고 자신의 블록체인에 추가한다.\r\n\r\n7. 이제 모든 노드는 새로운 블록이 추가된 동일한 블록체인을 갖는다.\r\n\r\n\r\n\r\n8. 지구 반대편의 노드와 같이 물리적 거리가 멀어 새로 만든 블록에 대한 소식을 늦게 전달하거나, 가까운 노드가 매우 비슷한 순간에 문제를 해결해 두 개 이상의 블록체인이 네트워크 상에 존재할 수 있다.\r\n9. 이렇게 블록체인이 충돌한 경우 가장 긴 체인이 신뢰도가 높다고 판단하기 때문에 짧은 체인을 삭제한다.\r\n\r\n\r\n\r\n10. 즉 발생한 거래는 새로운 블록이 추가되면서 증명된다.\r\n\r\n11. 그런데 위와 같은 충돌이나 기타 사유로 추가된 블록이 삭제될 수가 있다.\r\n\r\n12. 그래서 비트코인은 거래 내역이 담긴 블록이 생성되고 저장된 블록을 포함해 6개의 블록이 생성되어야(60분 소요) 거래가 확정된다.\r\n\r\n    (6개의 블록이 추가되면 분기가 생길 확률이 0에 가까워 진다.)\r\n","documentTitle":"[블록체인] 작업증명"},"__N_SSG":true},"page":"/articles/[articleCategory]/[articleId]","query":{"articleCategory":"BlockChain","articleId":"2"},"buildId":"WMqYWGkExDO2ZZQUMqQ3P","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>