<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>[GitHub Blog 개발기] sitemap, 게시글 등록 자동화 (Shell Script) | 웅&#x27;s 블로그</title><meta name="description" content="# [GitHub Blog 개발기] sitemap, 게시글 등록 자동화 (Shell Script)

지금까지 매번 글을 새로 작성할 때마다 다음과 같은 일을 해야 했었다.

1. 작성한 글의 Meta data(제목, 파일 위치, 작성시간, ID)를 **Meta data를 관리하는 JS 파일**에 추가
2. **sitemap.xml**에 해당 글의 url 추가
3. **배포**

처음에 계획했던 대로 위의 세 가지 프로세스를 자동화하고 싶었고 Shell Script를 이용해서 자동화를 구현했다.



## 동작 순서

1. Markdown이 있는 폴더와 안의 파일을 읽어 각 파일에 대한 Meta data를 얻고, &lt;u&gt;이를 바탕으로 Meta data 관리 JS 파일을 만든다.&lt;/u&gt;

2. JS 파일에 있는 정보를 바탕으로 &lt;u&gt;sitemap.xml 생성&lt;/u&gt;
3. 배포



## Shell Script 코드 전문

```bash
# 자동화 스크립트

# article_data 파일 읽기
search_dir=./src/store/article_data
file_dir=store/article_data

##### sitemap (1) - 파일 준비
echo &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;
&lt;urlset xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot; xmlns=\&quot;http://www.sitemaps.org/schemas/sitemap/0.9\&quot; xsi:schemaLocation=\&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\&quot;&gt;

&lt;!-- 메뉴 --&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/&lt;/loc&gt;
        &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;/url&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/profile&lt;/loc&gt;
        &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;/url&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/articles&lt;/loc&gt;
        &lt;changefreq&gt;daily&lt;/changefreq&gt;
    &lt;/url&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/archives&lt;/loc&gt;
        &lt;changefreq&gt;weekly&lt;/changefreq&gt;
    &lt;/url&gt;&quot; &gt; sitemap.xml
##### sitemap (1) END #####


##### 폴더 / 파일 구분
diretories=()

for entry in `ls $search_dir`; do
  if [ -d $search_dir/$entry ]; then
    diretories+=($entry)
  fi
done

echo Directories : ${diretories[@]}



############### [폴더] ###############
for dir in ${diretories[@]}; do
  echo [D : ${dir} 폴더 진입]
  CATEGORY=$dir
  ARTICLE_ID=0

##### js file (1) - Category 파일 생성
  echo &quot;const ${CATEGORY} = [&quot; &gt; $search_dir/${CATEGORY}.js
##### js file (1) END #####

  ##### 폴더의 파일 하나씩 추출 -&gt; 날짜, 위치
  for file in `ls $search_dir/$dir`; do
    DATE=&quot;${file%%_*}&quot;

    REL_ADDRESS=$search_dir/$dir/$file
    FILE_ADDRESS=$file_dir/$dir/$file
    
    ##### 파일 읽기 -&gt; 제목 추출
    while read line; do

      if [[ ${line:0:2} == &quot;# &quot; ]]; then
        TITLE=&quot;${line#*# }&quot; # 각 파일의 첫 번째 H1을 제목으로 선택
        TITLE=&quot;${TITLE::-1}&quot; # 개행문자 제거
        break
      fi

    done &lt; $REL_ADDRESS

##### js file (2) - Article Data 추가
    echo &quot;  {
    category: \&quot;${CATEGORY}\&quot;,
    id: ${ARTICLE_ID},
    title: \&quot;${TITLE}\&quot;,
    date: new Date(\&quot;${DATE:0:4}-${DATE:4:2}-${DATE:6:2}\&quot;),
    content: \&quot;${FILE_ADDRESS}\&quot;,
  },&quot; &gt;&gt; $search_dir/${CATEGORY}.js
  
    ARTICLE_ID=`expr $ARTICLE_ID + 1`
##### js file (2) END #####

  done

##### js file (3) - Category 파일 완료
  echo &quot;];

export default ${CATEGORY};
&quot; &gt;&gt; $search_dir/${CATEGORY}.js
##### js file (3) END #####

  echo -D : ${entry}.js 파일 생성-
done
######################################



files=()

for entry in `ls $search_dir`; do
  if [ -f $search_dir/$entry ]; then
    files+=($entry)
  fi
done

echo Files : ${files[@]}



############### [파일] ###############
for file in ${files[@]}; do
  echo [F : ${file} 파일 진입]
      
##### sitemap (2) - 카테고리 준비
  category=&quot;${file%%.*}&quot;
  url_index=0
  echo &quot;
&lt;!-- ${category} --&gt;&quot; &gt;&gt; sitemap.xml
##### sitemap (2) END #####
      
  while read line; do

    # 파일 위치 확인
    if [[ &quot;$line&quot; == *&quot;{&quot;* ]]; then

##### sitemap (3) - URL 추가
      echo &quot;    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/articles/${category}/${url_index}&lt;/loc&gt;
        &lt;changefreq&gt;daily&lt;/changefreq&gt;
    &lt;/url&gt;&quot; &gt;&gt; sitemap.xml

      url_index=`expr $url_index + 1`
##### sitemap (3) END #####

    fi

  done &lt; $search_dir/$file

  echo -F : sitemap에 ${file} 정보 추가-
done
######################################


##### sitemap (4) - sitemap 태그 닫기
echo &quot;
&lt;/urlset&gt;&quot; &gt;&gt; sitemap.xml
##### sitemap (4) END #####


############### [배포] ###############
npm run deploy
######################################
```



## 쉘 스크립트 문법

### Array

- [ **변수명=()** ] 형태로 생성
- [ **변수명+=(값)** ] 형태로 값 추가 가능

- [ $변수명 ] 은 0번째 인덱스의 값만 불러옴
  - 따라서 전체 값을 가져올 때는 반드시 [@]을 붙여서 써야 한다
  - [ **${변수명[@]}** ]



### 조건문

```bash
if [조건문]; then
	실행문
fi
```

```bash
if [조건문]; then
	실행문
	
elif [조건문]; then
	실행문
	
else [조건문]; then
	실행문
fi
```



### 반복문

- for문

```bash
for 변수 in 나열된 값; do
	실행문
done
```

- while문

```bash
while [조건문]; do
	실행문
done
```



### 문자열 추출

- 기준값 뒤로 추출 : **GET_STRING_BACK=&quot;${STRING#*기준값}&quot;**
- 기준값 앞으로 추출 : **GET_STRING_FRONT=&quot;${STRING%%기준값*}&quot;**
- 인덱스 기준으로 자르기 : **${STRING:시작인덱스:개수}**



### 파일 읽기

- 한 줄씩 읽기

```bash
while read line; do
	echo $line
done &lt; 파일위치
```

- 전체 읽기

  - cat 사용

  ```bash
  file=`cat 파일위치`
  echo &quot;$file&quot;
  ```

  - $() 사용

  ```bash
  file=$(&lt;파일위치)
  echo &quot;$file&quot;
  ```



### 파일 저장

- 파일 생성/덮어쓰기 (&gt;)

```bash
echo &quot;내용&quot; &gt; 파일위치
```

- 기존 파일에 데이터 추가 (&gt;&gt;)

```bash
echo &quot;내용&quot; &gt;&gt; 파일위치
```



### Tip

- 변수에 값을 할당할 때 띄어쓰기를 하면 안 된다
  - a = Hi (X)     /     **a=Hi (O)**
- 변수는 기본적으로 문자열이기 때문에 계산을 하려면 **expr** 를 사용해야 한다.
  - **result=&#x27;expr $var + 1&#x27;**"/><meta property="og:type" content="website"/><meta property="og:title" content="[GitHub Blog 개발기] sitemap, 게시글 등록 자동화 (Shell Script)"/><meta property="og:description" content="# [GitHub Blog 개발기] sitemap, 게시글 등록 자동화 (Shell Script)

지금까지 매번 글을 새로 작성할 때마다 다음과 같은 일을 해야 했었다.

1. 작성한 글의 Meta data(제목, 파일 위치, 작성시간, ID)를 **Meta data를 관리하는 JS 파일**에 추가
2. **sitemap.xml**에 해당 글의 url 추가
3. **배포**

처음에 계획했던 대로 위의 세 가지 프로세스를 자동화하고 싶었고 Shell Script를 이용해서 자동화를 구현했다.



## 동작 순서

1. Markdown이 있는 폴더와 안의 파일을 읽어 각 파일에 대한 Meta data를 얻고, &lt;u&gt;이를 바탕으로 Meta data 관리 JS 파일을 만든다.&lt;/u&gt;

2. JS 파일에 있는 정보를 바탕으로 &lt;u&gt;sitemap.xml 생성&lt;/u&gt;
3. 배포



## Shell Script 코드 전문

```bash
# 자동화 스크립트

# article_data 파일 읽기
search_dir=./src/store/article_data
file_dir=store/article_data

##### sitemap (1) - 파일 준비
echo &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;
&lt;urlset xmlns:xsi=\&quot;http://www.w3.org/2001/XMLSchema-instance\&quot; xmlns=\&quot;http://www.sitemaps.org/schemas/sitemap/0.9\&quot; xsi:schemaLocation=\&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\&quot;&gt;

&lt;!-- 메뉴 --&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/&lt;/loc&gt;
        &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;/url&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/profile&lt;/loc&gt;
        &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;/url&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/articles&lt;/loc&gt;
        &lt;changefreq&gt;daily&lt;/changefreq&gt;
    &lt;/url&gt;
    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/archives&lt;/loc&gt;
        &lt;changefreq&gt;weekly&lt;/changefreq&gt;
    &lt;/url&gt;&quot; &gt; sitemap.xml
##### sitemap (1) END #####


##### 폴더 / 파일 구분
diretories=()

for entry in `ls $search_dir`; do
  if [ -d $search_dir/$entry ]; then
    diretories+=($entry)
  fi
done

echo Directories : ${diretories[@]}



############### [폴더] ###############
for dir in ${diretories[@]}; do
  echo [D : ${dir} 폴더 진입]
  CATEGORY=$dir
  ARTICLE_ID=0

##### js file (1) - Category 파일 생성
  echo &quot;const ${CATEGORY} = [&quot; &gt; $search_dir/${CATEGORY}.js
##### js file (1) END #####

  ##### 폴더의 파일 하나씩 추출 -&gt; 날짜, 위치
  for file in `ls $search_dir/$dir`; do
    DATE=&quot;${file%%_*}&quot;

    REL_ADDRESS=$search_dir/$dir/$file
    FILE_ADDRESS=$file_dir/$dir/$file
    
    ##### 파일 읽기 -&gt; 제목 추출
    while read line; do

      if [[ ${line:0:2} == &quot;# &quot; ]]; then
        TITLE=&quot;${line#*# }&quot; # 각 파일의 첫 번째 H1을 제목으로 선택
        TITLE=&quot;${TITLE::-1}&quot; # 개행문자 제거
        break
      fi

    done &lt; $REL_ADDRESS

##### js file (2) - Article Data 추가
    echo &quot;  {
    category: \&quot;${CATEGORY}\&quot;,
    id: ${ARTICLE_ID},
    title: \&quot;${TITLE}\&quot;,
    date: new Date(\&quot;${DATE:0:4}-${DATE:4:2}-${DATE:6:2}\&quot;),
    content: \&quot;${FILE_ADDRESS}\&quot;,
  },&quot; &gt;&gt; $search_dir/${CATEGORY}.js
  
    ARTICLE_ID=`expr $ARTICLE_ID + 1`
##### js file (2) END #####

  done

##### js file (3) - Category 파일 완료
  echo &quot;];

export default ${CATEGORY};
&quot; &gt;&gt; $search_dir/${CATEGORY}.js
##### js file (3) END #####

  echo -D : ${entry}.js 파일 생성-
done
######################################



files=()

for entry in `ls $search_dir`; do
  if [ -f $search_dir/$entry ]; then
    files+=($entry)
  fi
done

echo Files : ${files[@]}



############### [파일] ###############
for file in ${files[@]}; do
  echo [F : ${file} 파일 진입]
      
##### sitemap (2) - 카테고리 준비
  category=&quot;${file%%.*}&quot;
  url_index=0
  echo &quot;
&lt;!-- ${category} --&gt;&quot; &gt;&gt; sitemap.xml
##### sitemap (2) END #####
      
  while read line; do

    # 파일 위치 확인
    if [[ &quot;$line&quot; == *&quot;{&quot;* ]]; then

##### sitemap (3) - URL 추가
      echo &quot;    &lt;url&gt;
        &lt;loc&gt;https://parkjeongwoong.github.io/articles/${category}/${url_index}&lt;/loc&gt;
        &lt;changefreq&gt;daily&lt;/changefreq&gt;
    &lt;/url&gt;&quot; &gt;&gt; sitemap.xml

      url_index=`expr $url_index + 1`
##### sitemap (3) END #####

    fi

  done &lt; $search_dir/$file

  echo -F : sitemap에 ${file} 정보 추가-
done
######################################


##### sitemap (4) - sitemap 태그 닫기
echo &quot;
&lt;/urlset&gt;&quot; &gt;&gt; sitemap.xml
##### sitemap (4) END #####


############### [배포] ###############
npm run deploy
######################################
```



## 쉘 스크립트 문법

### Array

- [ **변수명=()** ] 형태로 생성
- [ **변수명+=(값)** ] 형태로 값 추가 가능

- [ $변수명 ] 은 0번째 인덱스의 값만 불러옴
  - 따라서 전체 값을 가져올 때는 반드시 [@]을 붙여서 써야 한다
  - [ **${변수명[@]}** ]



### 조건문

```bash
if [조건문]; then
	실행문
fi
```

```bash
if [조건문]; then
	실행문
	
elif [조건문]; then
	실행문
	
else [조건문]; then
	실행문
fi
```



### 반복문

- for문

```bash
for 변수 in 나열된 값; do
	실행문
done
```

- while문

```bash
while [조건문]; do
	실행문
done
```



### 문자열 추출

- 기준값 뒤로 추출 : **GET_STRING_BACK=&quot;${STRING#*기준값}&quot;**
- 기준값 앞으로 추출 : **GET_STRING_FRONT=&quot;${STRING%%기준값*}&quot;**
- 인덱스 기준으로 자르기 : **${STRING:시작인덱스:개수}**



### 파일 읽기

- 한 줄씩 읽기

```bash
while read line; do
	echo $line
done &lt; 파일위치
```

- 전체 읽기

  - cat 사용

  ```bash
  file=`cat 파일위치`
  echo &quot;$file&quot;
  ```

  - $() 사용

  ```bash
  file=$(&lt;파일위치)
  echo &quot;$file&quot;
  ```



### 파일 저장

- 파일 생성/덮어쓰기 (&gt;)

```bash
echo &quot;내용&quot; &gt; 파일위치
```

- 기존 파일에 데이터 추가 (&gt;&gt;)

```bash
echo &quot;내용&quot; &gt;&gt; 파일위치
```



### Tip

- 변수에 값을 할당할 때 띄어쓰기를 하면 안 된다
  - a = Hi (X)     /     **a=Hi (O)**
- 변수는 기본적으로 문자열이기 때문에 계산을 하려면 **expr** 를 사용해야 한다.
  - **result=&#x27;expr $var + 1&#x27;**"/><meta property="og:site_name" content="웅&#x27;s 블로그"/><link rel="icon" href="/myLogo_transp.png"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/a1ca12cc1e4f36e64c14.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a1ca12cc1e4f36e64c14.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8d2cfc0c48a9fc169b11.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d2cfc0c48a9fc169b11.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-d1e3ce7bd5cd46c1581b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-fc862c0a09777205aa50.js" defer=""></script><script src="/_next/static/chunks/485-1121db7a55400d486874.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5BarticleCategory%5D/%5BarticleId%5D-0ecc19cf66a78d7522c3.js" defer=""></script><script src="/_next/static/j4KjGP3mvt0rTyBMUYLah/_buildManifest.js" defer=""></script><script src="/_next/static/j4KjGP3mvt0rTyBMUYLah/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="App"><div class="App__Content"><div class="Header_Header__1J9sN"><div class="Header_Header__styling__U361E"><img src="/myLogo_transp.png" alt="logo"/></div><a class="Header_Header__word__hqgKV" href="/">Home</a><a class="Header_Header__word__hqgKV" href="/profile">Profile</a><a class="Header_Header__word__hqgKV" href="/articles">Articles</a><a class="Header_Header__word__hqgKV" href="/archives">Archives</a><div class="Header_Header__styling_Reverse__2G1sc"></div></div><div><main><div class="globalStyles_loader__29zgS"><span>Loading...</span></div></main></div></div><div class="Footer_Footer__16BK3"><div class="Footer_Footer__github__3FRw-">Github : <a href="https://github.com/ParkJeongwoong">ParkJeongwoong</a></div><div class="Footer_Footer__email__gbWyz">Contact : <span>dvlprjw@gmail.com</span></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdown":"# [GitHub Blog 개발기] sitemap, 게시글 등록 자동화 (Shell Script)\r\n\r\n지금까지 매번 글을 새로 작성할 때마다 다음과 같은 일을 해야 했었다.\r\n\r\n1. 작성한 글의 Meta data(제목, 파일 위치, 작성시간, ID)를 **Meta data를 관리하는 JS 파일**에 추가\r\n2. **sitemap.xml**에 해당 글의 url 추가\r\n3. **배포**\r\n\r\n처음에 계획했던 대로 위의 세 가지 프로세스를 자동화하고 싶었고 Shell Script를 이용해서 자동화를 구현했다.\r\n\r\n\r\n\r\n## 동작 순서\r\n\r\n1. Markdown이 있는 폴더와 안의 파일을 읽어 각 파일에 대한 Meta data를 얻고, \u003cu\u003e이를 바탕으로 Meta data 관리 JS 파일을 만든다.\u003c/u\u003e\r\n\r\n2. JS 파일에 있는 정보를 바탕으로 \u003cu\u003esitemap.xml 생성\u003c/u\u003e\r\n3. 배포\r\n\r\n\r\n\r\n## Shell Script 코드 전문\r\n\r\n```bash\r\n# 자동화 스크립트\r\n\r\n# article_data 파일 읽기\r\nsearch_dir=./src/store/article_data\r\nfile_dir=store/article_data\r\n\r\n##### sitemap (1) - 파일 준비\r\necho \"\u003c?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?\u003e\r\n\u003curlset xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns=\\\"http://www.sitemaps.org/schemas/sitemap/0.9\\\" xsi:schemaLocation=\\\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\\\"\u003e\r\n\r\n\u003c!-- 메뉴 --\u003e\r\n    \u003curl\u003e\r\n        \u003cloc\u003ehttps://parkjeongwoong.github.io/\u003c/loc\u003e\r\n        \u003cchangefreq\u003emonthly\u003c/changefreq\u003e\r\n    \u003c/url\u003e\r\n    \u003curl\u003e\r\n        \u003cloc\u003ehttps://parkjeongwoong.github.io/profile\u003c/loc\u003e\r\n        \u003cchangefreq\u003emonthly\u003c/changefreq\u003e\r\n    \u003c/url\u003e\r\n    \u003curl\u003e\r\n        \u003cloc\u003ehttps://parkjeongwoong.github.io/articles\u003c/loc\u003e\r\n        \u003cchangefreq\u003edaily\u003c/changefreq\u003e\r\n    \u003c/url\u003e\r\n    \u003curl\u003e\r\n        \u003cloc\u003ehttps://parkjeongwoong.github.io/archives\u003c/loc\u003e\r\n        \u003cchangefreq\u003eweekly\u003c/changefreq\u003e\r\n    \u003c/url\u003e\" \u003e sitemap.xml\r\n##### sitemap (1) END #####\r\n\r\n\r\n##### 폴더 / 파일 구분\r\ndiretories=()\r\n\r\nfor entry in `ls $search_dir`; do\r\n  if [ -d $search_dir/$entry ]; then\r\n    diretories+=($entry)\r\n  fi\r\ndone\r\n\r\necho Directories : ${diretories[@]}\r\n\r\n\r\n\r\n############### [폴더] ###############\r\nfor dir in ${diretories[@]}; do\r\n  echo [D : ${dir} 폴더 진입]\r\n  CATEGORY=$dir\r\n  ARTICLE_ID=0\r\n\r\n##### js file (1) - Category 파일 생성\r\n  echo \"const ${CATEGORY} = [\" \u003e $search_dir/${CATEGORY}.js\r\n##### js file (1) END #####\r\n\r\n  ##### 폴더의 파일 하나씩 추출 -\u003e 날짜, 위치\r\n  for file in `ls $search_dir/$dir`; do\r\n    DATE=\"${file%%_*}\"\r\n\r\n    REL_ADDRESS=$search_dir/$dir/$file\r\n    FILE_ADDRESS=$file_dir/$dir/$file\r\n    \r\n    ##### 파일 읽기 -\u003e 제목 추출\r\n    while read line; do\r\n\r\n      if [[ ${line:0:2} == \"# \" ]]; then\r\n        TITLE=\"${line#*# }\" # 각 파일의 첫 번째 H1을 제목으로 선택\r\n        TITLE=\"${TITLE::-1}\" # 개행문자 제거\r\n        break\r\n      fi\r\n\r\n    done \u003c $REL_ADDRESS\r\n\r\n##### js file (2) - Article Data 추가\r\n    echo \"  {\r\n    category: \\\"${CATEGORY}\\\",\r\n    id: ${ARTICLE_ID},\r\n    title: \\\"${TITLE}\\\",\r\n    date: new Date(\\\"${DATE:0:4}-${DATE:4:2}-${DATE:6:2}\\\"),\r\n    content: \\\"${FILE_ADDRESS}\\\",\r\n  },\" \u003e\u003e $search_dir/${CATEGORY}.js\r\n  \r\n    ARTICLE_ID=`expr $ARTICLE_ID + 1`\r\n##### js file (2) END #####\r\n\r\n  done\r\n\r\n##### js file (3) - Category 파일 완료\r\n  echo \"];\r\n\r\nexport default ${CATEGORY};\r\n\" \u003e\u003e $search_dir/${CATEGORY}.js\r\n##### js file (3) END #####\r\n\r\n  echo -D : ${entry}.js 파일 생성-\r\ndone\r\n######################################\r\n\r\n\r\n\r\nfiles=()\r\n\r\nfor entry in `ls $search_dir`; do\r\n  if [ -f $search_dir/$entry ]; then\r\n    files+=($entry)\r\n  fi\r\ndone\r\n\r\necho Files : ${files[@]}\r\n\r\n\r\n\r\n############### [파일] ###############\r\nfor file in ${files[@]}; do\r\n  echo [F : ${file} 파일 진입]\r\n      \r\n##### sitemap (2) - 카테고리 준비\r\n  category=\"${file%%.*}\"\r\n  url_index=0\r\n  echo \"\r\n\u003c!-- ${category} --\u003e\" \u003e\u003e sitemap.xml\r\n##### sitemap (2) END #####\r\n      \r\n  while read line; do\r\n\r\n    # 파일 위치 확인\r\n    if [[ \"$line\" == *\"{\"* ]]; then\r\n\r\n##### sitemap (3) - URL 추가\r\n      echo \"    \u003curl\u003e\r\n        \u003cloc\u003ehttps://parkjeongwoong.github.io/articles/${category}/${url_index}\u003c/loc\u003e\r\n        \u003cchangefreq\u003edaily\u003c/changefreq\u003e\r\n    \u003c/url\u003e\" \u003e\u003e sitemap.xml\r\n\r\n      url_index=`expr $url_index + 1`\r\n##### sitemap (3) END #####\r\n\r\n    fi\r\n\r\n  done \u003c $search_dir/$file\r\n\r\n  echo -F : sitemap에 ${file} 정보 추가-\r\ndone\r\n######################################\r\n\r\n\r\n##### sitemap (4) - sitemap 태그 닫기\r\necho \"\r\n\u003c/urlset\u003e\" \u003e\u003e sitemap.xml\r\n##### sitemap (4) END #####\r\n\r\n\r\n############### [배포] ###############\r\nnpm run deploy\r\n######################################\r\n```\r\n\r\n\r\n\r\n## 쉘 스크립트 문법\r\n\r\n### Array\r\n\r\n- [ **변수명=()** ] 형태로 생성\r\n- [ **변수명+=(값)** ] 형태로 값 추가 가능\r\n\r\n- [ $변수명 ] 은 0번째 인덱스의 값만 불러옴\r\n  - 따라서 전체 값을 가져올 때는 반드시 [@]을 붙여서 써야 한다\r\n  - [ **${변수명[@]}** ]\r\n\r\n\r\n\r\n### 조건문\r\n\r\n```bash\r\nif [조건문]; then\r\n\t실행문\r\nfi\r\n```\r\n\r\n```bash\r\nif [조건문]; then\r\n\t실행문\r\n\t\r\nelif [조건문]; then\r\n\t실행문\r\n\t\r\nelse [조건문]; then\r\n\t실행문\r\nfi\r\n```\r\n\r\n\r\n\r\n### 반복문\r\n\r\n- for문\r\n\r\n```bash\r\nfor 변수 in 나열된 값; do\r\n\t실행문\r\ndone\r\n```\r\n\r\n- while문\r\n\r\n```bash\r\nwhile [조건문]; do\r\n\t실행문\r\ndone\r\n```\r\n\r\n\r\n\r\n### 문자열 추출\r\n\r\n- 기준값 뒤로 추출 : **GET_STRING_BACK=\"${STRING#*기준값}\"**\r\n- 기준값 앞으로 추출 : **GET_STRING_FRONT=\"${STRING%%기준값*}\"**\r\n- 인덱스 기준으로 자르기 : **${STRING:시작인덱스:개수}**\r\n\r\n\r\n\r\n### 파일 읽기\r\n\r\n- 한 줄씩 읽기\r\n\r\n```bash\r\nwhile read line; do\r\n\techo $line\r\ndone \u003c 파일위치\r\n```\r\n\r\n- 전체 읽기\r\n\r\n  - cat 사용\r\n\r\n  ```bash\r\n  file=`cat 파일위치`\r\n  echo \"$file\"\r\n  ```\r\n\r\n  - $() 사용\r\n\r\n  ```bash\r\n  file=$(\u003c파일위치)\r\n  echo \"$file\"\r\n  ```\r\n\r\n\r\n\r\n### 파일 저장\r\n\r\n- 파일 생성/덮어쓰기 (\u003e)\r\n\r\n```bash\r\necho \"내용\" \u003e 파일위치\r\n```\r\n\r\n- 기존 파일에 데이터 추가 (\u003e\u003e)\r\n\r\n```bash\r\necho \"내용\" \u003e\u003e 파일위치\r\n```\r\n\r\n\r\n\r\n### Tip\r\n\r\n- 변수에 값을 할당할 때 띄어쓰기를 하면 안 된다\r\n  - a = Hi (X)     /     **a=Hi (O)**\r\n- 변수는 기본적으로 문자열이기 때문에 계산을 하려면 **expr** 를 사용해야 한다.\r\n  - **result='expr $var + 1'**","documentTitle":"[GitHub Blog 개발기] sitemap, 게시글 등록 자동화 (Shell Script)"},"__N_SSG":true},"page":"/articles/[articleCategory]/[articleId]","query":{"articleCategory":"Develop","articleId":"7"},"buildId":"j4KjGP3mvt0rTyBMUYLah","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>