<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>[Spring] Spring 설정 - Java Config | 웅&#x27;s 블로그</title><meta name="description" content="# [Spring] Spring 설정 - Java Config

Spring 설정은 2가지 방법을 통해 가능하다.

1. xml 파일을 이용한 설정
2. java 파일을 이용한 설정



이번에는 java 파일을 통해서 Spring 설정을 하는 법을 다뤄보고자 한다.

## Java Config 생성

### 1) Java Config 파일 생성

1. `src/main/resources` 에 있는 **applicationContext.xml** 파일을 대체하기 위해, `src/main/java` 디렉토리에 **ems.member.configuration** 패키지의 **MemberConfiguration.java** 파일 생성한다.



2. **@Configuration**

- 스프링 설정 파일로서 &lt;u&gt;스프링 컨테이너를 생성하게 만드는 어노테이션&lt;/u&gt;

- 이 어노테이션이 붙은 Class는 Config 파일이 되어 xml 파일과 같은 기능을 한다

```java
@Configuration
public class MemberConfig {}
```



3. **@Bean**

- &lt;u&gt;Bean 객체를 만드는 어노테이션&lt;/u&gt; (&lt;bean&gt; 태그와 같은 역할)
- **return 할 때 새로운 객체를 new를 이용해서 반환한다**
- &lt;u&gt;클래스는 xml의 class&lt;/u&gt;와 동일, &lt;u&gt;클래스 명은 xml의 id&lt;/u&gt;와 동일하다

```java
/*
&lt;bean id=&quot;studentDao&quot; class=&quot;ems.memberm.service.StudentDao&quot;&gt;&lt;/bean&gt;
*/
@Bean
public StudentDao studentDao() {
	return new StudentDao();
}
```



4. **의존성 부여**

- 생성자 파라미터에 &lt;u&gt;의존하는 객체의 생성자를 넣음&lt;/u&gt;으로써 **의존성을 부여한다**

```java
/*
&lt;bean id=&quot;registerService&quot; class=&quot;ems.memberm.service.StudentRegisterService&quot;&gt;
	&lt;constructor-arg ref=&quot;StudentDao&quot;&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
*/
@Bean
public StudentRegisterService registerService() {
    return new StudentRegisterService(studentDao());
}
```



5. **property 부여**

property가 부여된 bean 객체를 만드는 방법은 다음과 같다.

- 먼저 &lt;u&gt;객체를 생성&lt;/u&gt;한다.
- &lt;u&gt;setter를 이용&lt;/u&gt;해서 각 value를 부여한다
- propery가 부여된 객체를 반환한다.

```java
/*
&lt;bean id=&quot;dataBaseConnectionInfoDev&quot; class=&quot;ems.memberm.service.DataBaseConnectionInfo&quot;&gt;
	&lt;property name=&quot;JdbcUrl&quot; value=&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;&gt;&lt;/property&gt;
	&lt;property name=&quot;UserId&quot; value=&quot;scott&quot;&gt;&lt;/property&gt;
	&lt;property name=&quot;UserPw&quot; value=&quot;tiger&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
*/
@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
    
    infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
    infoDev.setUserId(&quot;scott&quot;);
    infoDev.setUserPw(&quot;tiger&quot;);

    return infoDev;
}
```

만약 propery가 Array나 Map 형태라면 다음과 같은 방법을 사용하면 된다.

- Array 형태의 value는 &lt;u&gt;ArrayList&lt;String&gt;&lt;/u&gt;을 만들어서 setter로 부여한다
- Map 형태의 value는 HashMap을 이용해 &lt;u&gt;Map&lt;String, String&gt;&lt;/u&gt;을 만들어서 setter로 부여한다

```java
/*
&lt;bean id=&quot;informationService&quot; class=&quot;ems.memberm.service.EMSInformationService&quot;&gt;
	&lt;property name=&quot;developeres&quot;&gt;
		&lt;list&gt;
			&lt;value&gt;One&lt;/value&gt;
			&lt;value&gt;Two&lt;/value&gt;
			&lt;value&gt;Three&lt;/value&gt;
		&lt;/list&gt;
	&lt;/property&gt;
	&lt;property name=&quot;administrators&quot;&gt;
		&lt;map&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;Cheney&lt;/value&gt;
				&lt;/key&gt;
                &lt;value&gt;cheney@springPjt.org&lt;/value&gt;
			&lt;/entry&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;Jasper&lt;/value&gt;
				&lt;/key&gt;
                &lt;value&gt;jasper@springPjt.org&lt;/value&gt;
			&lt;/entry&gt;
		&lt;/map&gt;
	&lt;/property&gt;
	&lt;property name=&quot;dbInfos&quot;&gt;
		&lt;map&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;dev&lt;/value&gt;
				&lt;/key&gt;
                &lt;ref bean=&quot;dataBaseConnectionInfoDev&quot;/&gt;
			&lt;/entry&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;real&lt;/value&gt;
				&lt;/key&gt;
                &lt;ref bean=&quot;dataBaseConnectionInfoReal&quot;/&gt;
			&lt;/entry&gt;
		&lt;/map&gt;
	&lt;/property&gt;
&lt;/bean&gt;
*/
@Bean
public EMSInformationService informationService() {
    EMSInformationService info = new EMSInformationService();
    
    ArrayList&lt;String&gt; developers = new ArrayList&lt;String&gt;();
    developers.add(&quot;One&quot;);
    developers.add(&quot;Two&quot;);
    developers.add(&quot;Three&quot;);
    info.setDevelopers(developers);
		
    Map&lt;String, String&gt; administrators = new HashMap&lt;String, String&gt;();
    administrators.put(&quot;Cheney&quot;, &quot;cheney@springPjt.org&quot;);
    administrators.put(&quot;Jasper&quot;, &quot;jasper@springPjt.org&quot;);
    info.setAdministrators(administrators);
		
    Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
    dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev());
    dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal());
    info.setDbInfos(dbInfos);

    return info;
}
```



#### 전체 Java Config 파일 코드

전체 코드는 다음과 같다.

```java
@Configuration
public class MemberConfig {
    @Bean
    public StudentDao studentDao() {
        return new StudentDao();
    }

    @Bean
    public StudentRegisterService registerService() {
        return new StudentRegisterService(studentDao());
    }
    
    @Bean
    public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
        DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
        infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
        infoDev.setUserId(&quot;scott&quot;);
        infoDev.setUserPw(&quot;tiger&quot;);

        return infoDev;
    }
    
    @Bean
    public EMSInformationService informationService() {
        EMSInformationService info = new EMSInformationService();

        ArrayList&lt;String&gt; developers = new ArrayList&lt;String&gt;();
        developers.add(&quot;One&quot;);
        developers.add(&quot;Two&quot;);
        developers.add(&quot;Three&quot;);
        info.setDevelopers(developers);

        Map&lt;String, String&gt; administrators = new HashMap&lt;String, String&gt;();
        administrators.put(&quot;Cheney&quot;, &quot;cheney@springPjt.org&quot;);
        administrators.put(&quot;Jasper&quot;, &quot;jasper@springPjt.org&quot;);
        info.setAdministrators(administrators);

        Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
        dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev());
        dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal());
        info.setDbInfos(dbInfos);

        return info;
    }
}
```



### 2) Java Config 파일 적용

XML 파일을 스프링 프로젝트의 설정으로 적용하기 위해서 우리는 `GenericXmlApplicationContext` 클래스를 사용했었다.

마찬가지로 Java Config 파일의 설정을 스프링 프로젝트에 적용하기 위한 클래스도 있는데, 

`AnnotationConfigApplicationContext` 클래스를 사용하면 지금까지 만든 Java Config 파일을 적용할 수 있다.

```java
// GenericXmlApplicationContext ctx = new GenericXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);
AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(MemberConfig.class);
```

(`GenericXmlApplicationContext`이 아닌 `AnnotationConfigApplicationContext` 사용)



## Java Config 분리

&quot;개발 자체&quot;와 &quot;유지 보수&quot;의 용이성을 위해 **기능별로** java 설정 파일을 분리해서 만드는 것도 가능하다.

### 1) 기능별로 분리된 Java Config 파일 생성

일반적으로 **DAO, Service, DB, Utilities** 처럼 기능별로 분리한다.

&lt;u&gt;이 때, 참조하는 함수(bean 객체 생성함수)가 다른 java 설정 파일에 있다면 @Autowired를 사용해서 다른 java 파일에서 생성된 Bean 객체를 가져온다.&lt;/u&gt;

- 기존 파일

```java
// ***** 기존 파일
@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
    infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
    infoDev.setUserId(&quot;scott&quot;);
    infoDev.setUserPw(&quot;tiger&quot;);

    return infoDev;
}

@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoReal() {
    DataBaseConnectionInfo infoReal = new DataBaseConnectionInfo();
    infoReal.setJdbcUrl(&quot;jdbc:oracle:thin:@192.168.0.1:1521:xe&quot;);
    infoReal.setUserId(&quot;masterid&quot;);
    infoReal.setUserPw(&quot;masterpw&quot;);

    return infoReal;
}

@Bean
public EMSInformationService informationService() {
    EMSInformationService info = new EMSInformationService();
    
    Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
    dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev()); // 여기선 함수형태로 불러옴
    dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal()); // 여기선 함수형태로 불러옴
    info.setDbInfos(dbInfos);

    return info;
}
```

- 분리된 파일

```java
// ***** 분리된 파일
// java 파일 1
@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
    infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
    infoDev.setUserId(&quot;scott&quot;);
    infoDev.setUserPw(&quot;tiger&quot;);

    return infoDev;
}

@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoReal() {
    DataBaseConnectionInfo infoReal = new DataBaseConnectionInfo();
    infoReal.setJdbcUrl(&quot;jdbc:oracle:thin:@192.168.0.1:1521:xe&quot;);
    infoReal.setUserId(&quot;masterid&quot;);
    infoReal.setUserPw(&quot;masterpw&quot;);

    return infoReal;
}

// java 파일 2
@Autowired
DataBaseConnectionInfo dataBaseConnectionInfoDev;

@Autowired
DataBaseConnectionInfo dataBaseConnectionInfoReal;

@Bean
public EMSInformationService informationService() {
    EMSInformationService info = new EMSInformationService();
    
    Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
    dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev); // 여기선 Autowired로 가져온 bean 객체를 불러옴
    dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal); // 여기선 Autowired로 가져온 bean 객체를 불러옴
    info.setDbInfos(dbInfos);

    return info;
}
```



### 2) 여러 개의 Java Config 파일 적용

여러 개의 Java 설정 파일을 불러오는 방법은 쉽다.

여러 클래스를 나열해서 불러오면 된다.

```java
// AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(MemberConfig.class);
AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(
    MemberDaoConfig.class, MemberServiceConfig.class, MemberDBConfig.class, MemberUtilConfig.class
);
```



#### `@Import`

Import 어노테이션을 이용하면 Java Config 파일 적용할 때 여러 개를 나열할 필요가 없다.

[방법]

**@Import({java 클래스 파일1, java 클래스 파일2, ...})**

```java
@Configuration
@Import({MemberDaoConfig.class, MemberServiceConfig.class, MemberDBConfig.class, MemberUtilConfig.class})
public class MemberMainConfig {
    ...
}
```





## 출처

인프런 - 자바 스프링 프레임워크(renew ver.) - 신입 프로그래머를 위한 강좌"/><meta property="og:type" content="website"/><meta property="og:title" content="[Spring] Spring 설정 - Java Config"/><meta property="og:description" content="# [Spring] Spring 설정 - Java Config

Spring 설정은 2가지 방법을 통해 가능하다.

1. xml 파일을 이용한 설정
2. java 파일을 이용한 설정



이번에는 java 파일을 통해서 Spring 설정을 하는 법을 다뤄보고자 한다.

## Java Config 생성

### 1) Java Config 파일 생성

1. `src/main/resources` 에 있는 **applicationContext.xml** 파일을 대체하기 위해, `src/main/java` 디렉토리에 **ems.member.configuration** 패키지의 **MemberConfiguration.java** 파일 생성한다.



2. **@Configuration**

- 스프링 설정 파일로서 &lt;u&gt;스프링 컨테이너를 생성하게 만드는 어노테이션&lt;/u&gt;

- 이 어노테이션이 붙은 Class는 Config 파일이 되어 xml 파일과 같은 기능을 한다

```java
@Configuration
public class MemberConfig {}
```



3. **@Bean**

- &lt;u&gt;Bean 객체를 만드는 어노테이션&lt;/u&gt; (&lt;bean&gt; 태그와 같은 역할)
- **return 할 때 새로운 객체를 new를 이용해서 반환한다**
- &lt;u&gt;클래스는 xml의 class&lt;/u&gt;와 동일, &lt;u&gt;클래스 명은 xml의 id&lt;/u&gt;와 동일하다

```java
/*
&lt;bean id=&quot;studentDao&quot; class=&quot;ems.memberm.service.StudentDao&quot;&gt;&lt;/bean&gt;
*/
@Bean
public StudentDao studentDao() {
	return new StudentDao();
}
```



4. **의존성 부여**

- 생성자 파라미터에 &lt;u&gt;의존하는 객체의 생성자를 넣음&lt;/u&gt;으로써 **의존성을 부여한다**

```java
/*
&lt;bean id=&quot;registerService&quot; class=&quot;ems.memberm.service.StudentRegisterService&quot;&gt;
	&lt;constructor-arg ref=&quot;StudentDao&quot;&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
*/
@Bean
public StudentRegisterService registerService() {
    return new StudentRegisterService(studentDao());
}
```



5. **property 부여**

property가 부여된 bean 객체를 만드는 방법은 다음과 같다.

- 먼저 &lt;u&gt;객체를 생성&lt;/u&gt;한다.
- &lt;u&gt;setter를 이용&lt;/u&gt;해서 각 value를 부여한다
- propery가 부여된 객체를 반환한다.

```java
/*
&lt;bean id=&quot;dataBaseConnectionInfoDev&quot; class=&quot;ems.memberm.service.DataBaseConnectionInfo&quot;&gt;
	&lt;property name=&quot;JdbcUrl&quot; value=&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;&gt;&lt;/property&gt;
	&lt;property name=&quot;UserId&quot; value=&quot;scott&quot;&gt;&lt;/property&gt;
	&lt;property name=&quot;UserPw&quot; value=&quot;tiger&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
*/
@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
    
    infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
    infoDev.setUserId(&quot;scott&quot;);
    infoDev.setUserPw(&quot;tiger&quot;);

    return infoDev;
}
```

만약 propery가 Array나 Map 형태라면 다음과 같은 방법을 사용하면 된다.

- Array 형태의 value는 &lt;u&gt;ArrayList&lt;String&gt;&lt;/u&gt;을 만들어서 setter로 부여한다
- Map 형태의 value는 HashMap을 이용해 &lt;u&gt;Map&lt;String, String&gt;&lt;/u&gt;을 만들어서 setter로 부여한다

```java
/*
&lt;bean id=&quot;informationService&quot; class=&quot;ems.memberm.service.EMSInformationService&quot;&gt;
	&lt;property name=&quot;developeres&quot;&gt;
		&lt;list&gt;
			&lt;value&gt;One&lt;/value&gt;
			&lt;value&gt;Two&lt;/value&gt;
			&lt;value&gt;Three&lt;/value&gt;
		&lt;/list&gt;
	&lt;/property&gt;
	&lt;property name=&quot;administrators&quot;&gt;
		&lt;map&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;Cheney&lt;/value&gt;
				&lt;/key&gt;
                &lt;value&gt;cheney@springPjt.org&lt;/value&gt;
			&lt;/entry&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;Jasper&lt;/value&gt;
				&lt;/key&gt;
                &lt;value&gt;jasper@springPjt.org&lt;/value&gt;
			&lt;/entry&gt;
		&lt;/map&gt;
	&lt;/property&gt;
	&lt;property name=&quot;dbInfos&quot;&gt;
		&lt;map&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;dev&lt;/value&gt;
				&lt;/key&gt;
                &lt;ref bean=&quot;dataBaseConnectionInfoDev&quot;/&gt;
			&lt;/entry&gt;
			&lt;entry&gt;
				&lt;key&gt;
					&lt;value&gt;real&lt;/value&gt;
				&lt;/key&gt;
                &lt;ref bean=&quot;dataBaseConnectionInfoReal&quot;/&gt;
			&lt;/entry&gt;
		&lt;/map&gt;
	&lt;/property&gt;
&lt;/bean&gt;
*/
@Bean
public EMSInformationService informationService() {
    EMSInformationService info = new EMSInformationService();
    
    ArrayList&lt;String&gt; developers = new ArrayList&lt;String&gt;();
    developers.add(&quot;One&quot;);
    developers.add(&quot;Two&quot;);
    developers.add(&quot;Three&quot;);
    info.setDevelopers(developers);
		
    Map&lt;String, String&gt; administrators = new HashMap&lt;String, String&gt;();
    administrators.put(&quot;Cheney&quot;, &quot;cheney@springPjt.org&quot;);
    administrators.put(&quot;Jasper&quot;, &quot;jasper@springPjt.org&quot;);
    info.setAdministrators(administrators);
		
    Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
    dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev());
    dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal());
    info.setDbInfos(dbInfos);

    return info;
}
```



#### 전체 Java Config 파일 코드

전체 코드는 다음과 같다.

```java
@Configuration
public class MemberConfig {
    @Bean
    public StudentDao studentDao() {
        return new StudentDao();
    }

    @Bean
    public StudentRegisterService registerService() {
        return new StudentRegisterService(studentDao());
    }
    
    @Bean
    public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
        DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
        infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
        infoDev.setUserId(&quot;scott&quot;);
        infoDev.setUserPw(&quot;tiger&quot;);

        return infoDev;
    }
    
    @Bean
    public EMSInformationService informationService() {
        EMSInformationService info = new EMSInformationService();

        ArrayList&lt;String&gt; developers = new ArrayList&lt;String&gt;();
        developers.add(&quot;One&quot;);
        developers.add(&quot;Two&quot;);
        developers.add(&quot;Three&quot;);
        info.setDevelopers(developers);

        Map&lt;String, String&gt; administrators = new HashMap&lt;String, String&gt;();
        administrators.put(&quot;Cheney&quot;, &quot;cheney@springPjt.org&quot;);
        administrators.put(&quot;Jasper&quot;, &quot;jasper@springPjt.org&quot;);
        info.setAdministrators(administrators);

        Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
        dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev());
        dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal());
        info.setDbInfos(dbInfos);

        return info;
    }
}
```



### 2) Java Config 파일 적용

XML 파일을 스프링 프로젝트의 설정으로 적용하기 위해서 우리는 `GenericXmlApplicationContext` 클래스를 사용했었다.

마찬가지로 Java Config 파일의 설정을 스프링 프로젝트에 적용하기 위한 클래스도 있는데, 

`AnnotationConfigApplicationContext` 클래스를 사용하면 지금까지 만든 Java Config 파일을 적용할 수 있다.

```java
// GenericXmlApplicationContext ctx = new GenericXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);
AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(MemberConfig.class);
```

(`GenericXmlApplicationContext`이 아닌 `AnnotationConfigApplicationContext` 사용)



## Java Config 분리

&quot;개발 자체&quot;와 &quot;유지 보수&quot;의 용이성을 위해 **기능별로** java 설정 파일을 분리해서 만드는 것도 가능하다.

### 1) 기능별로 분리된 Java Config 파일 생성

일반적으로 **DAO, Service, DB, Utilities** 처럼 기능별로 분리한다.

&lt;u&gt;이 때, 참조하는 함수(bean 객체 생성함수)가 다른 java 설정 파일에 있다면 @Autowired를 사용해서 다른 java 파일에서 생성된 Bean 객체를 가져온다.&lt;/u&gt;

- 기존 파일

```java
// ***** 기존 파일
@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
    infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
    infoDev.setUserId(&quot;scott&quot;);
    infoDev.setUserPw(&quot;tiger&quot;);

    return infoDev;
}

@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoReal() {
    DataBaseConnectionInfo infoReal = new DataBaseConnectionInfo();
    infoReal.setJdbcUrl(&quot;jdbc:oracle:thin:@192.168.0.1:1521:xe&quot;);
    infoReal.setUserId(&quot;masterid&quot;);
    infoReal.setUserPw(&quot;masterpw&quot;);

    return infoReal;
}

@Bean
public EMSInformationService informationService() {
    EMSInformationService info = new EMSInformationService();
    
    Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
    dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev()); // 여기선 함수형태로 불러옴
    dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal()); // 여기선 함수형태로 불러옴
    info.setDbInfos(dbInfos);

    return info;
}
```

- 분리된 파일

```java
// ***** 분리된 파일
// java 파일 1
@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoDev() {
    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();
    infoDev.setJdbcUrl(&quot;jdbc:oracle:thin:@localhost:1521:xe&quot;);
    infoDev.setUserId(&quot;scott&quot;);
    infoDev.setUserPw(&quot;tiger&quot;);

    return infoDev;
}

@Bean
public DataBaseConnectionInfo dataBaseConnectionInfoReal() {
    DataBaseConnectionInfo infoReal = new DataBaseConnectionInfo();
    infoReal.setJdbcUrl(&quot;jdbc:oracle:thin:@192.168.0.1:1521:xe&quot;);
    infoReal.setUserId(&quot;masterid&quot;);
    infoReal.setUserPw(&quot;masterpw&quot;);

    return infoReal;
}

// java 파일 2
@Autowired
DataBaseConnectionInfo dataBaseConnectionInfoDev;

@Autowired
DataBaseConnectionInfo dataBaseConnectionInfoReal;

@Bean
public EMSInformationService informationService() {
    EMSInformationService info = new EMSInformationService();
    
    Map&lt;String, DataBaseConnectionInfo&gt; dbInfos = new HashMap&lt;String, DataBaseConnectionInfo&gt;();
    dbInfos.put(&quot;dev&quot;, dataBaseConnectionInfoDev); // 여기선 Autowired로 가져온 bean 객체를 불러옴
    dbInfos.put(&quot;real&quot;, dataBaseConnectionInfoReal); // 여기선 Autowired로 가져온 bean 객체를 불러옴
    info.setDbInfos(dbInfos);

    return info;
}
```



### 2) 여러 개의 Java Config 파일 적용

여러 개의 Java 설정 파일을 불러오는 방법은 쉽다.

여러 클래스를 나열해서 불러오면 된다.

```java
// AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(MemberConfig.class);
AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(
    MemberDaoConfig.class, MemberServiceConfig.class, MemberDBConfig.class, MemberUtilConfig.class
);
```



#### `@Import`

Import 어노테이션을 이용하면 Java Config 파일 적용할 때 여러 개를 나열할 필요가 없다.

[방법]

**@Import({java 클래스 파일1, java 클래스 파일2, ...})**

```java
@Configuration
@Import({MemberDaoConfig.class, MemberServiceConfig.class, MemberDBConfig.class, MemberUtilConfig.class})
public class MemberMainConfig {
    ...
}
```





## 출처

인프런 - 자바 스프링 프레임워크(renew ver.) - 신입 프로그래머를 위한 강좌"/><meta property="og:site_name" content="웅&#x27;s 블로그"/><link rel="icon" href="/myLogo_transp.png"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/a1ca12cc1e4f36e64c14.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a1ca12cc1e4f36e64c14.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8d2cfc0c48a9fc169b11.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d2cfc0c48a9fc169b11.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-d1e3ce7bd5cd46c1581b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-27d5fdc1d85004dc6cc5.js" defer=""></script><script src="/_next/static/chunks/485-1121db7a55400d486874.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5BarticleCategory%5D/%5BarticleId%5D-9ceb51083ce229176f1f.js" defer=""></script><script src="/_next/static/t1ga9om9q0UCF0Wlijaam/_buildManifest.js" defer=""></script><script src="/_next/static/t1ga9om9q0UCF0Wlijaam/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="App"><div class="App__Content"><div class="Header_Header__1J9sN"><div class="Header_Header__styling__U361E"><img src="/myLogo_transp.png" alt="logo"/></div><a class="Header_Header__word__hqgKV" href="/">Home</a><a class="Header_Header__word__hqgKV" href="/profile">Profile</a><a class="Header_Header__word__hqgKV" href="/articles">Articles</a><a class="Header_Header__word__hqgKV" href="/archives">Archives</a><div class="Header_Header__styling_Reverse__2G1sc"></div></div><div><main><div class="globalStyles_loader__29zgS"><span>Loading...</span></div></main></div></div><div class="Footer_Footer__16BK3"><div class="Footer_Footer__github__3FRw-">Github : <a href="https://github.com/ParkJeongwoong">ParkJeongwoong</a></div><div class="Footer_Footer__email__gbWyz">Contact : <span>dvlprjw@gmail.com</span></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdown":"# [Spring] Spring 설정 - Java Config\r\n\r\nSpring 설정은 2가지 방법을 통해 가능하다.\r\n\r\n1. xml 파일을 이용한 설정\r\n2. java 파일을 이용한 설정\r\n\r\n\r\n\r\n이번에는 java 파일을 통해서 Spring 설정을 하는 법을 다뤄보고자 한다.\r\n\r\n## Java Config 생성\r\n\r\n### 1) Java Config 파일 생성\r\n\r\n1. `src/main/resources` 에 있는 **applicationContext.xml** 파일을 대체하기 위해, `src/main/java` 디렉토리에 **ems.member.configuration** 패키지의 **MemberConfiguration.java** 파일 생성한다.\r\n\r\n\r\n\r\n2. **@Configuration**\r\n\r\n- 스프링 설정 파일로서 \u003cu\u003e스프링 컨테이너를 생성하게 만드는 어노테이션\u003c/u\u003e\r\n\r\n- 이 어노테이션이 붙은 Class는 Config 파일이 되어 xml 파일과 같은 기능을 한다\r\n\r\n```java\r\n@Configuration\r\npublic class MemberConfig {}\r\n```\r\n\r\n\r\n\r\n3. **@Bean**\r\n\r\n- \u003cu\u003eBean 객체를 만드는 어노테이션\u003c/u\u003e (\u003cbean\u003e 태그와 같은 역할)\r\n- **return 할 때 새로운 객체를 new를 이용해서 반환한다**\r\n- \u003cu\u003e클래스는 xml의 class\u003c/u\u003e와 동일, \u003cu\u003e클래스 명은 xml의 id\u003c/u\u003e와 동일하다\r\n\r\n```java\r\n/*\r\n\u003cbean id=\"studentDao\" class=\"ems.memberm.service.StudentDao\"\u003e\u003c/bean\u003e\r\n*/\r\n@Bean\r\npublic StudentDao studentDao() {\r\n\treturn new StudentDao();\r\n}\r\n```\r\n\r\n\r\n\r\n4. **의존성 부여**\r\n\r\n- 생성자 파라미터에 \u003cu\u003e의존하는 객체의 생성자를 넣음\u003c/u\u003e으로써 **의존성을 부여한다**\r\n\r\n```java\r\n/*\r\n\u003cbean id=\"registerService\" class=\"ems.memberm.service.StudentRegisterService\"\u003e\r\n\t\u003cconstructor-arg ref=\"StudentDao\"\u003e\u003c/constructor-arg\u003e\r\n\u003c/bean\u003e\r\n*/\r\n@Bean\r\npublic StudentRegisterService registerService() {\r\n    return new StudentRegisterService(studentDao());\r\n}\r\n```\r\n\r\n\r\n\r\n5. **property 부여**\r\n\r\nproperty가 부여된 bean 객체를 만드는 방법은 다음과 같다.\r\n\r\n- 먼저 \u003cu\u003e객체를 생성\u003c/u\u003e한다.\r\n- \u003cu\u003esetter를 이용\u003c/u\u003e해서 각 value를 부여한다\r\n- propery가 부여된 객체를 반환한다.\r\n\r\n```java\r\n/*\r\n\u003cbean id=\"dataBaseConnectionInfoDev\" class=\"ems.memberm.service.DataBaseConnectionInfo\"\u003e\r\n\t\u003cproperty name=\"JdbcUrl\" value=\"jdbc:oracle:thin:@localhost:1521:xe\"\u003e\u003c/property\u003e\r\n\t\u003cproperty name=\"UserId\" value=\"scott\"\u003e\u003c/property\u003e\r\n\t\u003cproperty name=\"UserPw\" value=\"tiger\"\u003e\u003c/property\u003e\r\n\u003c/bean\u003e\r\n*/\r\n@Bean\r\npublic DataBaseConnectionInfo dataBaseConnectionInfoDev() {\r\n    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();\r\n    \r\n    infoDev.setJdbcUrl(\"jdbc:oracle:thin:@localhost:1521:xe\");\r\n    infoDev.setUserId(\"scott\");\r\n    infoDev.setUserPw(\"tiger\");\r\n\r\n    return infoDev;\r\n}\r\n```\r\n\r\n만약 propery가 Array나 Map 형태라면 다음과 같은 방법을 사용하면 된다.\r\n\r\n- Array 형태의 value는 \u003cu\u003eArrayList\u003cString\u003e\u003c/u\u003e을 만들어서 setter로 부여한다\r\n- Map 형태의 value는 HashMap을 이용해 \u003cu\u003eMap\u003cString, String\u003e\u003c/u\u003e을 만들어서 setter로 부여한다\r\n\r\n```java\r\n/*\r\n\u003cbean id=\"informationService\" class=\"ems.memberm.service.EMSInformationService\"\u003e\r\n\t\u003cproperty name=\"developeres\"\u003e\r\n\t\t\u003clist\u003e\r\n\t\t\t\u003cvalue\u003eOne\u003c/value\u003e\r\n\t\t\t\u003cvalue\u003eTwo\u003c/value\u003e\r\n\t\t\t\u003cvalue\u003eThree\u003c/value\u003e\r\n\t\t\u003c/list\u003e\r\n\t\u003c/property\u003e\r\n\t\u003cproperty name=\"administrators\"\u003e\r\n\t\t\u003cmap\u003e\r\n\t\t\t\u003centry\u003e\r\n\t\t\t\t\u003ckey\u003e\r\n\t\t\t\t\t\u003cvalue\u003eCheney\u003c/value\u003e\r\n\t\t\t\t\u003c/key\u003e\r\n                \u003cvalue\u003echeney@springPjt.org\u003c/value\u003e\r\n\t\t\t\u003c/entry\u003e\r\n\t\t\t\u003centry\u003e\r\n\t\t\t\t\u003ckey\u003e\r\n\t\t\t\t\t\u003cvalue\u003eJasper\u003c/value\u003e\r\n\t\t\t\t\u003c/key\u003e\r\n                \u003cvalue\u003ejasper@springPjt.org\u003c/value\u003e\r\n\t\t\t\u003c/entry\u003e\r\n\t\t\u003c/map\u003e\r\n\t\u003c/property\u003e\r\n\t\u003cproperty name=\"dbInfos\"\u003e\r\n\t\t\u003cmap\u003e\r\n\t\t\t\u003centry\u003e\r\n\t\t\t\t\u003ckey\u003e\r\n\t\t\t\t\t\u003cvalue\u003edev\u003c/value\u003e\r\n\t\t\t\t\u003c/key\u003e\r\n                \u003cref bean=\"dataBaseConnectionInfoDev\"/\u003e\r\n\t\t\t\u003c/entry\u003e\r\n\t\t\t\u003centry\u003e\r\n\t\t\t\t\u003ckey\u003e\r\n\t\t\t\t\t\u003cvalue\u003ereal\u003c/value\u003e\r\n\t\t\t\t\u003c/key\u003e\r\n                \u003cref bean=\"dataBaseConnectionInfoReal\"/\u003e\r\n\t\t\t\u003c/entry\u003e\r\n\t\t\u003c/map\u003e\r\n\t\u003c/property\u003e\r\n\u003c/bean\u003e\r\n*/\r\n@Bean\r\npublic EMSInformationService informationService() {\r\n    EMSInformationService info = new EMSInformationService();\r\n    \r\n    ArrayList\u003cString\u003e developers = new ArrayList\u003cString\u003e();\r\n    developers.add(\"One\");\r\n    developers.add(\"Two\");\r\n    developers.add(\"Three\");\r\n    info.setDevelopers(developers);\r\n\t\t\r\n    Map\u003cString, String\u003e administrators = new HashMap\u003cString, String\u003e();\r\n    administrators.put(\"Cheney\", \"cheney@springPjt.org\");\r\n    administrators.put(\"Jasper\", \"jasper@springPjt.org\");\r\n    info.setAdministrators(administrators);\r\n\t\t\r\n    Map\u003cString, DataBaseConnectionInfo\u003e dbInfos = new HashMap\u003cString, DataBaseConnectionInfo\u003e();\r\n    dbInfos.put(\"dev\", dataBaseConnectionInfoDev());\r\n    dbInfos.put(\"real\", dataBaseConnectionInfoReal());\r\n    info.setDbInfos(dbInfos);\r\n\r\n    return info;\r\n}\r\n```\r\n\r\n\r\n\r\n#### 전체 Java Config 파일 코드\r\n\r\n전체 코드는 다음과 같다.\r\n\r\n```java\r\n@Configuration\r\npublic class MemberConfig {\r\n    @Bean\r\n    public StudentDao studentDao() {\r\n        return new StudentDao();\r\n    }\r\n\r\n    @Bean\r\n    public StudentRegisterService registerService() {\r\n        return new StudentRegisterService(studentDao());\r\n    }\r\n    \r\n    @Bean\r\n    public DataBaseConnectionInfo dataBaseConnectionInfoDev() {\r\n        DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();\r\n        infoDev.setJdbcUrl(\"jdbc:oracle:thin:@localhost:1521:xe\");\r\n        infoDev.setUserId(\"scott\");\r\n        infoDev.setUserPw(\"tiger\");\r\n\r\n        return infoDev;\r\n    }\r\n    \r\n    @Bean\r\n    public EMSInformationService informationService() {\r\n        EMSInformationService info = new EMSInformationService();\r\n\r\n        ArrayList\u003cString\u003e developers = new ArrayList\u003cString\u003e();\r\n        developers.add(\"One\");\r\n        developers.add(\"Two\");\r\n        developers.add(\"Three\");\r\n        info.setDevelopers(developers);\r\n\r\n        Map\u003cString, String\u003e administrators = new HashMap\u003cString, String\u003e();\r\n        administrators.put(\"Cheney\", \"cheney@springPjt.org\");\r\n        administrators.put(\"Jasper\", \"jasper@springPjt.org\");\r\n        info.setAdministrators(administrators);\r\n\r\n        Map\u003cString, DataBaseConnectionInfo\u003e dbInfos = new HashMap\u003cString, DataBaseConnectionInfo\u003e();\r\n        dbInfos.put(\"dev\", dataBaseConnectionInfoDev());\r\n        dbInfos.put(\"real\", dataBaseConnectionInfoReal());\r\n        info.setDbInfos(dbInfos);\r\n\r\n        return info;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n### 2) Java Config 파일 적용\r\n\r\nXML 파일을 스프링 프로젝트의 설정으로 적용하기 위해서 우리는 `GenericXmlApplicationContext` 클래스를 사용했었다.\r\n\r\n마찬가지로 Java Config 파일의 설정을 스프링 프로젝트에 적용하기 위한 클래스도 있는데, \r\n\r\n`AnnotationConfigApplicationContext` 클래스를 사용하면 지금까지 만든 Java Config 파일을 적용할 수 있다.\r\n\r\n```java\r\n// GenericXmlApplicationContext ctx = new GenericXmlApplicationContext(\"classpath:applicationContext.xml\");\r\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(MemberConfig.class);\r\n```\r\n\r\n(`GenericXmlApplicationContext`이 아닌 `AnnotationConfigApplicationContext` 사용)\r\n\r\n\r\n\r\n## Java Config 분리\r\n\r\n\"개발 자체\"와 \"유지 보수\"의 용이성을 위해 **기능별로** java 설정 파일을 분리해서 만드는 것도 가능하다.\r\n\r\n### 1) 기능별로 분리된 Java Config 파일 생성\r\n\r\n일반적으로 **DAO, Service, DB, Utilities** 처럼 기능별로 분리한다.\r\n\r\n\u003cu\u003e이 때, 참조하는 함수(bean 객체 생성함수)가 다른 java 설정 파일에 있다면 @Autowired를 사용해서 다른 java 파일에서 생성된 Bean 객체를 가져온다.\u003c/u\u003e\r\n\r\n- 기존 파일\r\n\r\n```java\r\n// ***** 기존 파일\r\n@Bean\r\npublic DataBaseConnectionInfo dataBaseConnectionInfoDev() {\r\n    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();\r\n    infoDev.setJdbcUrl(\"jdbc:oracle:thin:@localhost:1521:xe\");\r\n    infoDev.setUserId(\"scott\");\r\n    infoDev.setUserPw(\"tiger\");\r\n\r\n    return infoDev;\r\n}\r\n\r\n@Bean\r\npublic DataBaseConnectionInfo dataBaseConnectionInfoReal() {\r\n    DataBaseConnectionInfo infoReal = new DataBaseConnectionInfo();\r\n    infoReal.setJdbcUrl(\"jdbc:oracle:thin:@192.168.0.1:1521:xe\");\r\n    infoReal.setUserId(\"masterid\");\r\n    infoReal.setUserPw(\"masterpw\");\r\n\r\n    return infoReal;\r\n}\r\n\r\n@Bean\r\npublic EMSInformationService informationService() {\r\n    EMSInformationService info = new EMSInformationService();\r\n    \r\n    Map\u003cString, DataBaseConnectionInfo\u003e dbInfos = new HashMap\u003cString, DataBaseConnectionInfo\u003e();\r\n    dbInfos.put(\"dev\", dataBaseConnectionInfoDev()); // 여기선 함수형태로 불러옴\r\n    dbInfos.put(\"real\", dataBaseConnectionInfoReal()); // 여기선 함수형태로 불러옴\r\n    info.setDbInfos(dbInfos);\r\n\r\n    return info;\r\n}\r\n```\r\n\r\n- 분리된 파일\r\n\r\n```java\r\n// ***** 분리된 파일\r\n// java 파일 1\r\n@Bean\r\npublic DataBaseConnectionInfo dataBaseConnectionInfoDev() {\r\n    DataBaseConnectionInfo infoDev = new DataBaseConnectionInfo();\r\n    infoDev.setJdbcUrl(\"jdbc:oracle:thin:@localhost:1521:xe\");\r\n    infoDev.setUserId(\"scott\");\r\n    infoDev.setUserPw(\"tiger\");\r\n\r\n    return infoDev;\r\n}\r\n\r\n@Bean\r\npublic DataBaseConnectionInfo dataBaseConnectionInfoReal() {\r\n    DataBaseConnectionInfo infoReal = new DataBaseConnectionInfo();\r\n    infoReal.setJdbcUrl(\"jdbc:oracle:thin:@192.168.0.1:1521:xe\");\r\n    infoReal.setUserId(\"masterid\");\r\n    infoReal.setUserPw(\"masterpw\");\r\n\r\n    return infoReal;\r\n}\r\n\r\n// java 파일 2\r\n@Autowired\r\nDataBaseConnectionInfo dataBaseConnectionInfoDev;\r\n\r\n@Autowired\r\nDataBaseConnectionInfo dataBaseConnectionInfoReal;\r\n\r\n@Bean\r\npublic EMSInformationService informationService() {\r\n    EMSInformationService info = new EMSInformationService();\r\n    \r\n    Map\u003cString, DataBaseConnectionInfo\u003e dbInfos = new HashMap\u003cString, DataBaseConnectionInfo\u003e();\r\n    dbInfos.put(\"dev\", dataBaseConnectionInfoDev); // 여기선 Autowired로 가져온 bean 객체를 불러옴\r\n    dbInfos.put(\"real\", dataBaseConnectionInfoReal); // 여기선 Autowired로 가져온 bean 객체를 불러옴\r\n    info.setDbInfos(dbInfos);\r\n\r\n    return info;\r\n}\r\n```\r\n\r\n\r\n\r\n### 2) 여러 개의 Java Config 파일 적용\r\n\r\n여러 개의 Java 설정 파일을 불러오는 방법은 쉽다.\r\n\r\n여러 클래스를 나열해서 불러오면 된다.\r\n\r\n```java\r\n// AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(MemberConfig.class);\r\nAnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(\r\n    MemberDaoConfig.class, MemberServiceConfig.class, MemberDBConfig.class, MemberUtilConfig.class\r\n);\r\n```\r\n\r\n\r\n\r\n#### `@Import`\r\n\r\nImport 어노테이션을 이용하면 Java Config 파일 적용할 때 여러 개를 나열할 필요가 없다.\r\n\r\n[방법]\r\n\r\n**@Import({java 클래스 파일1, java 클래스 파일2, ...})**\r\n\r\n```java\r\n@Configuration\r\n@Import({MemberDaoConfig.class, MemberServiceConfig.class, MemberDBConfig.class, MemberUtilConfig.class})\r\npublic class MemberMainConfig {\r\n    ...\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n## 출처\r\n\r\n인프런 - 자바 스프링 프레임워크(renew ver.) - 신입 프로그래머를 위한 강좌","documentTitle":"[Spring] Spring 설정 - Java Config"},"__N_SSG":true},"page":"/articles/[articleCategory]/[articleId]","query":{"articleCategory":"Web","articleId":"5"},"buildId":"t1ga9om9q0UCF0Wlijaam","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>