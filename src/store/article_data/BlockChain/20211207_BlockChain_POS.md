# [블록체인] 지분증명

지난 글에서 작업증명과 작업증명을 이용한 비트코인의 블록 추가 과정에 대해 설명했다.

비록 시간 낭비가 목적인 의도적인 비효율이 존재하지만 작업증명은 결과적으로 지난 몇 년간 안정적으로 합의를 이루며 시스템을 잘 유지시켜 왔다. 

하지만 의도된 비효율은 큰 결함이었고 생각보다 훨씬 더 많은 에너지를 낭비한다는 것이 알려졌다.

작업증명의 태생적인 문제를 해결하기 위해 여러 합의 알고리즘이 제시되었는데 지분증명이 그 중 가장 널리 사용되는 합의 알고리즘이다.



## 지분증명

먼저 알아두어야 할 것은 지분증명은 특정 합의 알고리즘을 말하는 것이 아니다. 비트코인의 방식이 정석이 된 작업증명과는 다르게 지분증명은 지분을 이용해 합의를 하는 알고리즘을 총칭하며 블록체인 네트워크마다 그 세부적인 방식에 차이가 크다.

세부적으로는 다르지만 지분증명에도 큰 줄기는 존재하는데 대표적으로 **Chain-Based POS**와 **BFT-Style POS**가 있다.



### Chain-Based POS (Proof of Stake)

![image-20211208001652187](../../../../public/assets/image-20211208001652187.png)

일정 주기마다 알고리즘이 지분을 포함한 여러 요소를 바탕으로 검증자를 선택하고 검증자는 새 블록을 생성한다.



### BFT-Style  POS (Proof of Stake)

![image-20211208001727536](../../../../public/assets/image-20211208001727536.png)

블록 제안과 블록 선택 과정이 분리되어 있다.

블록 제안 과정에서는 랜덤하게 선택된 여러 검증자들이 블록을 선택한다. 

이 후 블록 선택 과정에서 지분 만큼 투표를 하고 가장 많은 투표를 받은 블록이 다음 블록으로 선택된다.

### 

### 결론

지분이 많을 수록 새로운 블록 선택권이 강해지는 구조다.

즉, 많이 가진 자는 시스템의 가치가 떨어졌을 때 손해가 크기 때문에 시스템에 해를 끼칠 가능성이 적다는 가정 하에 많이 가진 만큼 권력을 주는 방식이다.

검증자에게 블록 선택이란 굉장한 권한이 생기기 때문에 이를 악용할 여지가 있으므로 거짓을 한다고 판명나면 패널티를 준다.

(이더리움 Casper에서는 보증금을 맡기고 이 보증금 만큼 지분을 가지게 되며 검증자로 선정되면 일정 기간 동안 보증금을 뺄 수 없게 된다. 그 기간 동안 거짓이 탄로나면 보증금을 잃는다.)

